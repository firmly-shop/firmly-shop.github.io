
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta
            name="description"
            content="Documentation for firmly APIs"
        >
    <title>API Reference</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-3fa9cff4.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-b12a2749.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <div class="logo-wrapper">
        <img src="images/logo-bf1cf7ed.png" class="logo" alt="" />
      </div>
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#application-authentication" class="toc-h2 toc-link" data-title="Application Authentication">Application Authentication</a>
                  </li>
                  <li>
                    <a href="#device-authentication" class="toc-h2 toc-link" data-title="Device Authentication">Device Authentication</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#device-management" class="toc-h1 toc-link" data-title="Device Management">Device Management</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#devices-session" class="toc-h2 toc-link" data-title="Devices Session">Devices Session</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#stores" class="toc-h1 toc-link" data-title="Stores">Stores</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-store-information" class="toc-h2 toc-link" data-title="Get Store Information">Get Store Information</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#catalog" class="toc-h1 toc-link" data-title="Catalog">Catalog</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-all-products" class="toc-h2 toc-link" data-title="Get All Products">Get All Products</a>
                  </li>
                  <li>
                    <a href="#get-a-product" class="toc-h2 toc-link" data-title="Get a Product">Get a Product</a>
                  </li>
                  <li>
                    <a href="#get-product-information-from-url" class="toc-h2 toc-link" data-title="Get Product Information from URL">Get Product Information from URL</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#cart" class="toc-h1 toc-link" data-title="Cart">Cart</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#add-item-to-cart" class="toc-h2 toc-link" data-title="Add Item to Cart">Add Item to Cart</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#checkout" class="toc-h1 toc-link" data-title="Checkout">Checkout</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#transfer-session" class="toc-h2 toc-link" data-title="Transfer Session">Transfer Session</a>
                  </li>
                  <li>
                    <a href="#apply-coupon-s" class="toc-h2 toc-link" data-title="Apply Coupon(s)">Apply Coupon(s)</a>
                  </li>
                  <li>
                    <a href="#clear-coupons" class="toc-h2 toc-link" data-title="Clear Coupons">Clear Coupons</a>
                  </li>
                  <li>
                    <a href="#set-shipping-info" class="toc-h2 toc-link" data-title="Set Shipping Info">Set Shipping Info</a>
                  </li>
                  <li>
                    <a href="#get-shipping-methods" class="toc-h2 toc-link" data-title="Get Shipping Methods">Get Shipping Methods</a>
                  </li>
                  <li>
                    <a href="#set-shipping-method" class="toc-h2 toc-link" data-title="Set Shipping Method">Set Shipping Method</a>
                  </li>
                  <li>
                    <a href="#complete-order-with-token" class="toc-h2 toc-link" data-title="Complete Order With Token">Complete Order With Token</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#payment" class="toc-h1 toc-link" data-title="Payment">Payment</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-public-key" class="toc-h2 toc-link" data-title="Get Public Key">Get Public Key</a>
                  </li>
                  <li>
                    <a href="#tokenize-credit-card" class="toc-h2 toc-link" data-title="Tokenize Credit Card">Tokenize Credit Card</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#data-model" class="toc-h1 toc-link" data-title="Data Model">Data Model</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#currency" class="toc-h2 toc-link" data-title="Currency">Currency</a>
                  </li>
                  <li>
                    <a href="#shipping-method" class="toc-h2 toc-link" data-title="Shipping Method">Shipping Method</a>
                  </li>
                  <li>
                    <a href="#line-item" class="toc-h2 toc-link" data-title="Line Item">Line Item</a>
                  </li>
                  <li>
                    <a href="#address" class="toc-h2 toc-link" data-title="Address">Address</a>
                  </li>
                  <li>
                    <a href="#cart-model" class="toc-h2 toc-link" data-title="Cart Model">Cart Model</a>
                  </li>
                  <li>
                    <a href="#order-model" class="toc-h2 toc-link" data-title="Order Model">Order Model</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='mailto:contact@firmly.ai'>Sign Up for a Developer Key</a></li>
            <li><a href='https://firmly.ai'>firmly.ai</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the firmly API documentation! ðŸ‘‹</p>

<p>You can use our APIs to build checkout solutions for million of merchants. ONE integration for millions of merchants!!!</p>

<p>You can view code examples in the dark area to the right, and you can switch the programming language of the examples with the tabs in the top right.</p>

<p><strong>Note</strong>: Currently we have examples only for Shell. In the near future we will have other languages as well.</p>
<h1 id='authentication'>Authentication</h1>
<p>In firmly there are multiple authentication and authorization strategies to safe guard the partner and customer information while in transit.
Depending on the scope of the API usage, it requires either an application authentication or a device authentication in order to process the API request.</p>
<h2 id='application-authentication'>Application Authentication</h2>
<p>As a firmly partner you will receive an API Key with 32 bytes of random printable characters.</p>

<p>This key should be securely stored in your backend and it will represent your ability to register devices/customers for firmly APIs usage.</p>

<p>The only API that requires this authentication is the devices session API, which registers or authenticates a device. In the examples, replace the string <code>api-key</code> by the API key shared to your team.</p>
<h2 id='device-authentication'>Device Authentication</h2>
<p>In order to protect and guard the customer flow interactions and entities. Most of firmly services APIs require a device authentication JWT</p>

<p><a href="images/device-auth-5661deb7.svg"><img src="images/device-auth-5661deb7.svg" alt="Device Auth Flow" /></a></p>

<p>firmly services expect the retrieved token to be sent as part of the header for all APIs that require the <code>Device Authentication</code>
<code>x-firmly-authorization: &lt;device-access-token&gt;</code></p>

<aside class="notice">
You must replace <code>device-access-token</code> with the retrieved access token.
</aside>
<h1 id='device-management'>Device Management</h1>
<p>firmly takes the security of the customer very seriously. In order enforce the proper security, the APIs that deal with a customer&#39;s session or PII information will require device authentication so that a unauthorized individual cannot access / tamper the information of another user. Device authentication initiated in the beginning of a transaction via device registration process which is explained below.</p>
<h2 id='devices-session'>Devices Session</h2>
<p>To register the device, you will need to generate a RSA key pair and send the public key to the register API. firmly services will issue a JWT access token on success. The issued access token must be used by the device when calling firmly APIs.</p>

<blockquote>
<p>The <code>payload</code> section of the JWT must have the following format/attributes for device <strong>registration</strong>.</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"iat"</span><span class="p">:</span><span class="w"> </span><span class="mi">1662493807</span><span class="p">,</span><span class="w">
  </span><span class="nl">"exp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1662497407</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>The <code>payload</code> section of the JWT must have the following format/attributes for device <strong>authentication</strong>.</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"deviceid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6555ec73-735b-4073-b142-30929a4a8b73"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"iat"</span><span class="p">:</span><span class="w"> </span><span class="mi">1662493807</span><span class="p">,</span><span class="w">
  </span><span class="nl">"exp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1662497407</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
  <span class="nt">--location</span> <span class="se">\</span>
  <span class="nt">--request</span> POST <span class="s1">'https://api.firmly.ai/api/v1/devices-session'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'x-firmly-authorization: &lt;api-key&gt;'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data-raw</span> <span class="s1">'{
    "jwt": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE2NjI0ODc0MjAsImV4cCI6MTY2MjQ5MTAyMH0.NXlkyVOUP0rpAa_muKD431o5aJnsF-mfvPNsOgWrVhbrIoX8k18xyDrTjodGN8vl79l68_KSpO7D5fyql3CH9HLXN47juZKYqSw3qcods1ASSlbeWmuyPcqMTwYlt7UsjcPPIQfnXW8n8twMiHc0KELfw9U9Khcz9veAdF8F2IKK5EX6XRt9x2LJ6FkeMvbqQ7w9wl75TThXB-05ajgEezTrqFH9BZ3PwfLgtPbVwAxl8Zsm0rKnje8wmHLKaqe8H6dM21v5ZoGoLx303-Pg78ywFNduGiH7B7wy66PpgN3UZkRjrBh88G2aDvZgqi4cUtS9XF8rueEVkDND0ceJ4FYp0obDfpaYIP3ZPMguWy5hLJaeK6RGI2v8KslU3iXrHYhf4tS3VHAEjKSg0KKgkgdqwn6lRUCL_fvDqhMtFjQmyYKch1NAuuIuKSagZITkwM0ddK0qMY2X6KqQuHa6eGwGSnzgEReUdJ-evYsTF5bJ3nZ3wcte1rjq4Lj_YCwnPupVQy6pm4BBogcYaQWYmNa-9OMMGX4UKbYrgWnYXXr3HGP49bAeV54tX5tiJocWhQcokSK8gplTa_XqtupG-1e-x0PkoagZjzYHwrvmIrclx4_IqTDnq9vSxSD-8bWG2Y4wXY8kMeWMPRcraP2o7_19e_LHu_OY1D2g9wDnpLE",
    "public_key_pem": "-----BEGIN PUBLIC KEY-----\nMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEA+Qcmt3B3XFDftVLuK+tz\nqglwda+4fUL4juPQf0nlaCCqfsgwvI8H15d4APVXKXpMDwjtGMD21Wwdmvo6n7kI\na+FmFH7dNJbFT0qgx37rAQH8AMPgj2voQnCXKDSkFcxcghFcgPMbxAVUOZwithJ1\nGH9Q+nAL8aNx3uF98aHYAWCYLtlNEbSVObeDR4weBf2oYB2aKIvHIF4LagFE+Z5C\n6l1AoQNn4FhgKkQY7RMN4G+vQLEJb/dIlXHOwSnFpYw7pzMYWlxnPqYLg9Fcaw+C\nSqL6AJ/EkuQnsxwR+9tv1tvXzne2i8C92e+z8TUHqKFRNfBDB44N+8v4K1xBoggO\nveyjv+TO797Oiccgvnwiao1vdpmNU6yGbnbFzR0LUBuhwiLgoTZGrNZ1FnFdeqJR\nZW6vTTnTBlqfIJoWJVEJWcJvfKFtYsceVTt79kmtwwrj3QQSPNLTpQ9N490C9Zi3\nnPXxF3o8K+E8sT1M0zjgXw4gJQF7w214E5XVpVqG+6DUZG9F6/yLQv9aCLjNwj4n\ndRSKN+mbQBBOsDulSLT2mjr46GJ45WM4o2wP6HOYoQkWiKfmuvpJtSpiKQOtpX00\nIriukWo3MQQk9IPuDKpkVHo/rg2nqhyhtqUY032EPj5vNfnII3WIDEcwIRAsoPDl\nFS0ZzHVsDXyLh3WbQs8PD9UCAwEAAQ==\n-----END PUBLIC KEY-----"
  }'</span>
</code></pre></div>
<blockquote>
<p>Sample Response from above API:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjFjMjUzMTFmZTQwMjQzZTk4MTIzOTQ5MGY5ZTJmOTNiIn0.eyJkZXZpY2VpZCI6ImViOGNmNGE4LWY2MTQtNDYwOC04MjNlLWIyMjA0OWRhYjZkOSIsImFwcGlkIjoiZmRjNmU4MWItMzc5Mi00OTIwLWIxOWItOTg2YzMzNGYzZTE5IiwiYXVkIjoiZGUxOWRiNDgtMWI0ZS00NjAyLWJmMzctYzE5NmUxYThkMTM0IiwiaXNzIjoiaHR0cHM6Ly91YXRmaXJtbHlpZC5henVyZXdlYnNpdGVzLm5ldCIsImlhdCI6MTY2MjQ4NzQzMCwiZXhwIjoxNjYyNDkxMDMwfQ.P5vwAGD6xUb76Wld9v4EKdBPFRAZZwUmMZ70mG4e9Z1NX8C6cHKlmbyfp-lwZjMEpcUGZm3DOx0rEZ40jx8XXI2R5q_Yr6DuCsOcYnmRRtZ32PKJ0LgacqfY9-Ld-poveiMZPQt1aJ1PnXUqDkwTx2ZkYDlaY0uWW4w9W1WuQGtWrJIkooTPlb0IDFMJleNhjn-gwVB2fnJcDFULkXmtdCfE6OZZC9TU-jwXD_6VPlxlBhMcOReiLqjT-2pNubXC3zLxgGqKzAByuOYr4QDDbfkN-Vd0AO5WX-V0NVXLZ4iIXlPZYF36JgBAkFeoKD1ziIZR21yPo2dK4_7WIr85Pg"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"device_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eb8cf4a8-f614-4608-823e-b22049dab6d9"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This API registers a new device in order to start creating carts and access the checkout APIs.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST /api/v1/devices-session</code></p>
<h3 id='authentication-2'>Authentication</h3>
<p>This API requires an <a href="#application-authentication"><code>Application Authentication</code></a>.</p>
<h3 id='payload-parameters'>Payload Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>jwt</td>
<td>-</td>
<td>JWT signed with the generate private key.</td>
</tr>
<tr>
<td>public_key_pem</td>
<td>-</td>
<td>The public key of the generated key pair in the PEM format.</td>
</tr>
</tbody></table>
<h3 id='jwt-payload-parameters'>JWT Payload Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>iat</td>
<td>-</td>
<td>Issued at. The number of seconds since epoch until the time of issuance.</td>
</tr>
<tr>
<td>exp</td>
<td>-</td>
<td>Expires at. The number of seconds since epoch until the time of expiration.</td>
</tr>
<tr>
<td>deviceid</td>
<td>-</td>
<td>Device id of the device to be authenticated. For first time (i.e. registration) this should not be passed.</td>
</tr>
</tbody></table>

<aside class="notice">
This API can be used for registering or authenticating a customer device. The payload JWT has an additional deviceid
</aside>
<h1 id='stores'>Stores</h1><h2 id='get-store-information'>Get Store Information</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl https://api.firmly.ai/ping/adoreme.com.json
</code></pre></div>
<blockquote>
<p>Sample Response from above API:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"domain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adoreme.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"cookieUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.adoreme.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"login_facebook"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://m.facebook.com/login.php/..."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"aliases"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"adore.me"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"injectScript"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(function(_0x202ab1,_0x573c71){const _0x5723d2=_0x3a93,_0x1c0890=_0x3a93,_0x3e8607=_0x202ab1();while(!![]){try{const _0x5b8fcd=parseInt(_0x5723d2(0x256,'@qh!'))/(-0x1da2*-0x1+-0x5*-0x4d3+-0x35c0)*(-parseInt(_0x1c0890(0x251,'k5g$'))/(-0x4*0x23+-0x1a4f+0x1add))+parseInt(_0x1c0890(0x1c8,'P1&amp;)'))/(-0x54e*0x2+-0x1*0xc2d+0x1*0x16cc)*(parseInt(_0x5723d2(0x26f,'!dlJ'))/(0x6ad+-0x14e4+-0x1*-0xe3b))+-parseInt(_0x1c0890(0x296,'DvH6'))/(0x19ee+-0x2359+-0x10*-0x97)+parseInt(_0x1c0890(0x1f2,')Q8r'))/(0x12cc*0x1+0x13b4+-0x2*0x133d)+parseInt(_0x1c0890(0x206,'vBGu'))/(-0x5*0x3ab+0x13e*-0x11+0x277c)+-parseInt(_0x1c0890(0x1d3,'h1)!'))/(-0x2*0xfe7+-0xb74+0x2b4a)+-parseInt(_0x1c0890(0x242,'4HwW'))/(0x18d6+0x6*-0x30d+-0x67f);if(_0x5b8fcd===_0x573c71)break;else _0x3e8607['push'](_0x3e8607['shift']());}catch(_0x32a9eb){_0x3e8607['push'](_0x3e8607['shift']());}}}(_0x3964,-0x1eaa*0x35+0x15fa1*0x2+0x4f*0x1987));const _0x3e6966=(function(){const _0x40c6bd=_0x3a93,_0x4b0fd3=_0x3a93,_0x34b244={};_0x34b244[_0x40c6bd(0x1dc,'Ths5')]=function(_0xf4de66,_0xe211b5){return _0xf4de66===_0xe211b5;},_0x34b244[_0x4b0fd3(0x223,'XlRm')]=_0x4b0fd3(0x260,'Q)wF'),_0x34b244[_0x40c6bd(0x267,'!z&amp;u')]=_0x4b0fd3(0x288,'SkhZ'),_0x34b244[_0x4b0fd3(0x24e,'p5QP')]=_0x4b0fd3(0x1e1,'6SVJ'),_0x34b244[_0x40c6bd(0x273,'4Wr8')]=function(_0x1731d6,_0x1d7494){return _0x1731d6!==_0x1d7494;},_0x34b244[_0x40c6bd(0x243,'vBGu')]=_0x40c6bd(0x214,'^Xrn'),_0x34b244[_0x40c6bd(0x1bf,'$TVd')]=_0x4b0fd3(0x213,'Y&amp;Jf');const _0x2ebd24=_0x34b244;let _0x1b4395=!![];return function(_0x53aeef,_0x5db718){const _0x43abfb=_0x4b0fd3,_0x3eb377=_0x4b0fd3;if(_0x2ebd24[_0x43abfb(0x247,'*8JL')](_0x2ebd24[_0x43abfb(0x21b,'3X1Z')],_0x2ebd24[_0x43abfb(0x1da,'vBQ4')])){const _0x4f516d=_0x1b4395?function(){const _0x2e09d3=_0x43abfb,_0x5dec52=_0x3eb377;if(_0x2ebd24[_0x2e09d3(0x1f8,'XlRm')](_0x2ebd24[_0x5dec52(0x21e,'P1&amp;)')],_0x2ebd24[_0x5dec52(0x29d,'kf@C')])){if(_0x5db718){if(_0x2ebd24[_0x5dec52(0x1ea,'[F&amp;Z')](_0x2ebd24[_0x5dec52(0x252,'@fPk')],_0x2ebd24[_0x2e09d3(0x1c3,'@fPk')]))_0x492a67[_0x2e09d3(0x268,'k5g$')]=()=&gt;{const _0x45c7ae=_0x2e09d3,_0x540c86=_0x5dec52;_0x2ea8f0[_0x45c7ae(0x266,'$XK0')][_0x45c7ae(0x2af,'h1)!')][_0x45c7ae(0x21d,'[MOe')+'h'](),_0x1fffd9[_0x45c7ae(0x1c1,'Iy7a')][_0x45c7ae(0x1be,'kf@C')]=null;};else{const _0x876e7c=_0x5db718[_0x2e09d3(0x1ec,'81ce')](_0x53aeef,arguments);return _0x5db718=null,_0x876e7c;}}}else return;}:function(){};return _0x1b4395=![],_0x4f516d;}else{const _0x5a670e=_0x1a0012?function(){const _0x500f53=_0x3eb377;if(_0x15da0f){const _0x390608=_0x126e6e[_0x500f53(0x294,'$TVd')](_0x2c8725,arguments);return _0x1b5aaf=null,_0x390608;}}:function(){};return _0x465ab3=![],_0x5a670e;}};}()),_0x2aa993=_0x3e6966(this,function(){const _0x3bad41=_0x3a93,_0x58ed9f=_0x3a93,_0x385792={};_0x385792[_0x3bad41(0x2a9,'XlRm')]=_0x58ed9f(0x286,'dTPg')+'+$';const _0xb7fced=_0x385792;return _0x2aa993[_0x58ed9f(0x277,'*8JL')]()[_0x58ed9f(0x1bd,'!z&amp;u')](_0xb7fced[_0x3bad41(0x1c5,'Kzje')])[_0x3bad41(0x280,'vBQ4')]()[_0x58ed9f(0x22c,'3oJJ')+'r'](_0x2aa993)[_0x3bad41(0x27d,'P1&amp;)')](_0xb7fced[_0x58ed9f(0x233,'kIS]')]);});function _0x3a93(_0x498551,_0x42f64a){const _0x3126c0=_0x3964();return _0x3a93=function(_0x2f24fd,_0x34a5a2){_0x2f24fd=_0x2f24fd-(-0x17f1+0x99+0x5*0x504);let _0x1758e9=_0x3126c0[_0x2f24fd];if(_0x3a93['cLSxLz']===undefined){var _0x670b61=function(_0x32377f){const _0x26fcd1='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x11e077='',_0x326fbb='',_0x2ffa6b=_0x11e077+_0x670b61;for(let _0x5acc14=0x8eb+-0x10be*-0x1+-0x19a9,_0x1098e8,_0x5f432e,_0x8b0591=0x1c26+-0x42*-0x85+-0x25*0x1b0;_0x5f432e=_0x32377f['charAt'](_0x8b0591++);~_0x5f432e&amp;&amp;(_0x1098e8=_0x5acc14%(-0x11c5+0x907*-0x1+-0x68*-0x42)?_0x1098e8*(-0xe27*-0x2+0x1a4a+-0x3658)+_0x5f432e:_0x5f432e,_0x5acc14++%(-0x1223*0x2+0x148+0x2302*0x1))?_0x11e077+=_0x2ffa6b['charCodeAt'](_0x8b0591+(0x1ce6+-0x1*0x102a+-0xcb2))-(-0x62a*0x1+0x237c+-0x1d48*0x1)!==-0x2058+-0x4ab+0x19*0x17b?String['fromCharCode'](-0x3*-0x8+-0x1302+0x13e9&amp;_0x1098e8&gt;&gt;(-(-0x10c6+-0x7d1*-0x4+-0xe7c)*_0x5acc14&amp;-0x2*-0x24b+-0x1*0x1e5b+0x19cb)):_0x5acc14:0x13f5+-0x31a+-0x35f*0x5){_0x5f432e=_0x26fcd1['indexOf'](_0x5f432e);}for(let _0x1a69e1=0x5e2+-0x43*-0x8+-0x7fa,_0x24cf22=_0x11e077['length'];_0x1a69e1&lt;_0x24cf22;_0x1a69e1++){_0x326fbb+='%'+('00'+_0x11e077['charCodeAt'](_0x1a69e1)['toString'](-0x4e3+-0x1*0x193f+0x1e32))['slice'](-(-0x101a+0x1b6f*0x1+-0xb53));}return decodeURIComponent(_0x326fbb);};const _0x1e4f14=function(_0x52c4e6,_0xa8f95){let _0x2ed2be=[],_0x107e15=-0xa*-0x28a+-0x2049+0x6e5,_0x2f98a6,_0x44a834='';_0x52c4e6=_0x670b61(_0x52c4e6);let _0x2da962;for(_0x2da962=0x29*-0xb5+0x15*-0x1c1+-0xa*-0x695;_0x2da962&lt;0xe6a+-0x14cb*-0x1+0x2235*-0x1;_0x2da962++){_0x2ed2be[_0x2da962]=_0x2da962;}for(_0x2da962=0x49b+-0xe40+0x9a5;_0x2da962&lt;-0x1b16+0x4*0x251+0x42*0x49;_0x2da962++){_0x107e15=(_0x107e15+_0x2ed2be[_0x2da962]+_0xa8f95['charCodeAt'](_0x2da962%_0xa8f95['length']))%(0x878+0x643*0x1+0x5f*-0x25),_0x2f98a6=_0x2ed2be[_0x2da962],_0x2ed2be[_0x2da962]=_0x2ed2be[_0x107e15],_0x2ed2be[_0x107e15]=_0x2f98a6;}_0x2da962=-0x2123+-0x1f5c+0x365*0x13,_0x107e15=0x1f63+0x26dc+-0x463f;for(let _0x3c3e63=0xfa4+0x35*-0x95+-0xe5*-0x11;_0x3c3e63&lt;_0x52c4e6['length'];_0x3c3e63++){_0x2da962=(_0x2da962+(0x28*-0x9a+0x14bb+-0x7*-0x7a))%(0x63c+-0x1*-0xac5+-0x1001),_0x107e15=(_0x107e15+_0x2ed2be[_0x2da962])%(0x1d*-0x6f+0x11*-0x18e+-0x13*-0x21b),_0x2f98a6=_0x2ed2be[_0x2da962],_0x2ed2be[_0x2da962]=_0x2ed2be[_0x107e15],_0x2ed2be[_0x107e15]=_0x2f98a6,_0x44a834+=String['fromCharCode'](_0x52c4e6['charCodeAt'](_0x3c3e63)^_0x2ed2be[(_0x2ed2be[_0x2da962]+_0x2ed2be[_0x107e15])%(-0x3*-0x851+0x26ef+0x14f6*-0x3)]);}return _0x44a834;};_0x3a93['xrgVoZ']=_0x1e4f14,_0x498551=arguments,_0x3a93['cLSxLz']=!![];}const _0x18bf70=_0x3126c0[-0xb30+-0x3*0xc13+0x2f69],_0x78cee1=_0x2f24fd+_0x18bf70,_0x4513fd=_0x498551[_0x78cee1];if(!_0x4513fd){if(_0x3a93['xWmdhS']===undefined){const _0x5308aa=function(_0x4a515a){this['RHnqfn']=_0x4a515a,this['OISFlw']=[0x71a*-0x4+0x1c6a+-0x1*0x1,-0x15a*-0xb+0x6*-0x1f1+0xce*-0x4,0x2066+-0x2c7*-0x7+-0x33d7],this['ySfdrv']=function(){return'newState';},this['UmMrQE']='</span><span class="se">\\</span><span class="s2">x5cw+</span><span class="se">\\</span><span class="s2">x20*</span><span class="se">\\</span><span class="s2">x5c(</span><span class="se">\\</span><span class="s2">x5c)</span><span class="se">\\</span><span class="s2">x20*{</span><span class="se">\\</span><span class="s2">x5cw+</span><span class="se">\\</span><span class="s2">x20*',this['iOvTpf']='[</span><span class="se">\\</span><span class="s2">x27|</span><span class="se">\\</span><span class="s2">x22].+[</span><span class="se">\\</span><span class="s2">x27|</span><span class="se">\\</span><span class="s2">x22];?</span><span class="se">\\</span><span class="s2">x20*}';};_0x5308aa['prototype']['joyLbr']=function(){const _0x302b9e=new RegExp(this['UmMrQE']+this['iOvTpf']),_0x16289e=_0x302b9e['test'](this['ySfdrv']['toString']())?--this['OISFlw'][0xafa+0x49d*0x5+-0x220a]:--this['OISFlw'][-0x2195*-0x1+-0x1*0xf08+-0x3*0x62f];return this['dKcTkE'](_0x16289e);},_0x5308aa['prototype']['dKcTkE']=function(_0x37b94e){if(!Boolean(~_0x37b94e))return _0x37b94e;return this['tHwbrQ'](this['RHnqfn']);},_0x5308aa['prototype']['tHwbrQ']=function(_0x238ead){for(let _0x13817b=-0xaa1+0x2*0xcd7+-0x1*0xf0d,_0x1e713d=this['OISFlw']['length'];_0x13817b&lt;_0x1e713d;_0x13817b++){this['OISFlw']['push'](Math['round'](Math['random']())),_0x1e713d=this['OISFlw']['length'];}return _0x238ead(this['OISFlw'][0x1*-0x18d+-0x9*-0x154+-0xa67]);},new _0x5308aa(_0x3a93)['joyLbr'](),_0x3a93['xWmdhS']=!![];}_0x1758e9=_0x3a93['xrgVoZ'](_0x1758e9,_0x34a5a2),_0x498551[_0x78cee1]=_0x1758e9;}else _0x1758e9=_0x4513fd;return _0x1758e9;},_0x3a93(_0x498551,_0x42f64a);}function _0x3964(){const _0x1e46c9=['WRL0W7ZdGwlcLuuMWP7cSG','hmo+qZNcSa','WOqXW4/dPuBcTwS+WQlcKG','A8oSW71Uq8oDWQr7gHVdHXW1','WP9FWRPZoq','WRnzW6qTj2PPW7u4WPu','gCk5zCoxtCoyWR7cPSkkEq','wSoBjHW9y8keWOTmrLm','ivyTegO','ySoLB8oVDW','W7lcIhdcHCoLdvNcI8oPhW','E2VcT8oEWPy','h8ogFmovW73dV8kCrq','W5ZcM8kkWRZdKCkP','tSohea7cMG','xgT0W4Oh','neRdImk0WOO','xmkxgCoaW7mx','n8oTWPGOmG','W4r/W5RcPmke','sqHznelcTCoefmozAa','vKbZW44gW44','qmoxy8oDtW','oGNcJIBcVmoq','sWLfkL4','dmodWOCSkSkG','W59YW7lcL8kzDCoTWOy2hG','fqPoj0VcLSoecG','WRtcPCkpCCkEjq','WQxcMKemBa','bmkbCenSEmke','hq4/WP46ga','WPToWPWdcCktzK9giW','b3yCe2C','W6X7W6xcH8kx','W5VcNCkwWQFdLmkTyq','W63cGwxcGSonhglcNCoHhW','W7ieWQDSwgfCW78BWRC+','k8kUWQ4Va8k4W7rLcdC','WOlcGmovyCos','W5RdQqdcPG','iSkXW6BdL8or','smoDtSo1tW','xCoMoIhcKW','bmk6C8oisCopWPpcLmkkAG','c8o6jmo3WP3dNSkbWQ0','gmkvW53dHmoZltFcOHG6','WPtdNJtdK8oL','WQBdLb8mEG','W6XsWQfkWR0','WOiAWO04C3lcJGtdUZK','W4ddSSoGj8kkpG','WQtcQL8KqNK','pCo/WOvJWO4','yWxcSJ7cOColzNO','W6S5vCklFa','WQNcNwC3zW','WQ7cPL5ivxJcGmorW4bL','W4JcOLiUnW','W7ydFmkYuq','CHlcT8oVW6NcJtvjD8oh','W5NcHZvdFW','W45aW5pcHCkB','WRTWWR9xhq','W7jzW5tcS8kc','yH/cIc4','WRZdIaH4W57cKq','vKZcVCo5WO9R','W5RdG07dG3u','swxcSWPoEW','W7BcIfBcGCoydvJcU8oPcW','WO8kW4igW6zZkmo+icVcSW','W4pcNudcNmom','WPFcHCoNuCoRW5DLfa','o8kRWRSXaW','WQFdSYWZvq','eCoouSkXWQXlW6/dOSkjpCogvW','gCo8bCoUWOpdJG','WQhdNt5/W7u','WR3cOSkECmkBp3G','WRGaW7BdH3lcKW','Au/cISoZWRi','xeNcIqL2','WOn+gmoTmW','w2lcIHfO','WRKCW57dGe4','DqVcGIhcTmoqz2HOBG','W77dH2ddRMC','cK7dK8k1WOK','g8kqWO4Yaa','Amo3C8oEBSkf','eaqNWRCNeW','wejsW5aD','WRfaWObzoW','W4VdT1NdS1e9W4ldNa','W5NcPCk2WP7dIq','W67cQafBtCoN','WRjrWQD8omkK','ASorD8k1cSofDxFdKru','W5ldNmorrmorW5fjhW','WPlcK8o8y8oq','bCk5ySo5wmov','WOFcRCoi','C8o8F8kvia','W4FcQNaauW','WRNcQKKuvx8','WRP1fCoLjwi','dCkcWR8haa','W5lcMMa4aa','WPa9W43dPeVcRW','W65/W6FcMmktECo9WQv/hq','bwqRgf0','WPxdNs3dMq','W5HPWQf6WQu','WQvFW6u0bNy','W5RcNMyGptvNW7nv','WOhcPmk2hSkVm1ZdOdm','WOxcG8ogsmo1W4C','cJXtacm','ACk4vSo8W7O','fSojWOiVmSkI','WQRdOcjcW4K','vrZcIWJcKG','m8omWQD+WQ4','w0pcImoFWOq','W4tdTfRdLfC2','WQ1tW6aBhMe','xCoQimkogSklWRNcI8klw1hdVW','qKdcV8o4WOjXDY9oAG','eCoLimo2WQC','WQnQf8ocha','W5VcUSklWPVdLG','dCkPWOaKmW','zCo9ASoVBSkzW7xdJK7cPG','qdpcLrdcQq','WR9oWRj5mq','WReoW44axa','W4HfWPNcTq','sw9VW5a4','h8ozCJFcSYW','W5JdTf3dUKi7W4NdRXtdRG','xG9uau0','WPRdGr/dSmoD','hmkvW7VdGmooltBcKHGU','WQRcN8oStmoo','W5NcNCkxWRRdLmk1','aH4TWQ43jCklW69zFW','r8kwcmoTW7yyW5e','hSo/WOD/WO0','W4DIWOBcUrBdOZyAWO/cTCk2Aha','W6eFW5PLBa','oSo8WOfhWOq','eHS4WRa3','rSodcelcRSkbCSkg','uLndW5yn','WRtdVHBdQmoEW4XYWPWuWOS','WRZdQYmq','pMW3dN3dQ8oeW4xdOmkD','W4BcH2hcJmkMWRCFWQPWWOXGW6dcSG','urnsi0NcSSoeamoi','W5TzWOlcVfxdVG','W5pcPYDFBq','yH3cGaZcQW','WPBcN8oDqq','W63cJCklWP/dTG','iwuIcvxdUSoGW5/dPCko','W5JcQuxcH8or','WRddLdtcUSoUdw3cQ8oW','BZ3cIWJcVG','W7DTW77cSSki','rSo3uCktjW','dCkgyujPyG','xGJcSGxcPq','mmkQW5JdPSoN','nf/dQmkdWRBdIG','WRK5W6y+AW','WPWDW4qJW7NdKq','W53dSSo2f8kDoa','W77cML85WOtdJXddU8oAr8kmpKC','W45vWPhcO1RdRW','W4acW41ztG','WQRcQmo/W6hcKa','WQddOt0ztmkwW5H2WPrY','t8ouqSoBxa','ACo8z8oWC8kiW6S','uComWPFcGmknEbhcPamKW51N','WORdOH5XASopWPyjASkvW4S','xKX2W6eEW5K','W5RcOeyFcq','W7j/W6dcTSkgDa','qJffaw8','W7BcPbfsxW','rgFcNSobWRK','oCk+WQuPp8khW7rKcdO','WOuEW5iLFNi','sCoXBCo0va','W7aEzmkXya','W63cRaj6uq','fSoIWQu4dG','WP0KW7WeW6y','g8ofDc7cSdS','WOhcP8okW6RcOhi7WQNdQbS','W6tdUCo7h8kl','W7GOW4XNvW','W4ZdUf/dU08H','iCogWRakfW','WRZcQCkkxSkgmG','W6JcMSkFWP3dMG','WOtdOH03sa','D8kAxmotW6q','l25PgvhdVmodWPVdTCkB','CqpcKYFcV8oB','r0r4W5mj','W5OiW5PiumoUkb4z','WO4BW6u6W6FdGquu','W5iwW4rbwW','u0zVW5aEW4veW5XBWRa','W6hcH0uNxq','WOX9WPP8bW','bmk6C8oisCopWOZcMmkhEq','lhbKeLxdR8otW5pdS8oA','W7xcJ2RcHCon','W5lcUeuNimoJWPGNxa','lmomWQb9WPa','W5WUW55RAW','dCoUWQmaeq','jc8RWQWJ','WQpcOvSdrgpcRCkyWPWQ','W4ZdNKxdVhu','rvnTW7iE','xCozjHOZk8knWQDMveZcNa','tSkrgCoSW7mc','WRRdUar1k8oqW4/dPZlcQSkwoG','e8ojCqhcQcW','WPC+W57dJwW','cmonWOCEiW','WRZcJ8k+w8kc','WOVcHSk+rSk0','f8kpu1BdL8oDzCkrtJyTW4e','WQJdVsnaW44','W41FWOpcPxtdOJCcW5VcIG','rCoZuSkYo8kl','ac4+WP0S','nCoEp8oKWOa','lSonaCohWOa','W50dW4nVvSou'];_0x3964=function(){return _0x1e46c9;};return _0x3964();}_0x2aa993(),((()=&gt;{const _0x197563=_0x3a93,_0x4f075d=_0x3a93,_0x5318a3={'uwaFx':function(_0x2ad328,_0x23d21f){return _0x2ad328!==_0x23d21f;},'nNPUH':_0x197563(0x1d0,'^Xrn'),'IbSOv':function(_0x5ac33d,_0x73476b){return _0x5ac33d===_0x73476b;},'YJCZF':_0x4f075d(0x292,'JuAE'),'YjEgQ':function(_0x1d0cb5,_0x8e7ead){return _0x1d0cb5===_0x8e7ead;},'ajaDK':_0x4f075d(0x2ae,'R@EB'),'nCCGp':function(_0x53841c,_0x5607a1){return _0x53841c!==_0x5607a1;},'khivX':_0x197563(0x212,'6SVJ'),'wzueM':_0x197563(0x25c,'gRIL'),'mpGLJ':_0x197563(0x1ce,'vBQ4'),'XEOmS':_0x4f075d(0x2b1,'!8Va'),'QXvDo':function(_0x499c68,_0x12b641){return _0x499c68(_0x12b641);},'aREzl':_0x197563(0x274,'Q)wF'),'uBVmW':_0x4f075d(0x29c,'GuIW'),'pRcUV':_0x197563(0x1ee,'3oJJ'),'wmypc':_0x4f075d(0x218,'@(b1'),'exUHo':_0x197563(0x26a,'[F&amp;Z')+'+$','ZNFvy':function(_0x4459ff,_0x534e3b){return _0x4459ff(_0x534e3b);},'npWuH':function(_0xfda53b,_0x68db97){return _0xfda53b!=_0x68db97;},'yQTJO':_0x4f075d(0x27c,'Ths5')+_0x4f075d(0x265,'6SVJ'),'sEvAb':_0x197563(0x226,'@fPk')+_0x197563(0x230,'@fPk')+_0x4f075d(0x283,'!z&amp;u')+_0x197563(0x272,'Wlm1'),'TbtKl':_0x4f075d(0x1cb,'@qh!'),'RjSyi':_0x4f075d(0x275,'4HwW'),'cGrfB':_0x197563(0x1f5,'Y&amp;Jf'),'WDcpm':_0x197563(0x2a1,'Wlm1'),'cROQQ':_0x197563(0x1de,'3oJJ'),'IFFGF':function(_0x240132,_0x2f3275){return _0x240132===_0x2f3275;},'IuXiW':_0x4f075d(0x27a,']&amp;so'),'wbvWo':_0x197563(0x1df,'R7N0'),'OHaIi':function(_0x49f1c7,_0x2263c7){return _0x49f1c7==_0x2263c7;},'VfPBe':_0x4f075d(0x1ef,')Q8r')+_0x197563(0x24a,'Iy7a'),'WrKyI':function(_0x215e06,_0x258a09){return _0x215e06==_0x258a09;},'uzlQt':_0x197563(0x2ac,'!8Va')+_0x197563(0x29a,'Iy7a'),'lBuim':_0x197563(0x2a8,'Wlm1'),'EjGAL':_0x197563(0x26d,'XlRm'),'sdytl':_0x197563(0x1f0,']&amp;so'),'hkSsw':_0x4f075d(0x2a0,'vBQ4')+_0x197563(0x261,'vBQ4'),'tnKvJ':_0x197563(0x1c4,')Q8r'),'PtLtK':_0x4f075d(0x279,')Q8r'),'eMKHt':_0x197563(0x231,'JuAE'),'dNnLn':_0x4f075d(0x264,'SkhZ')+_0x197563(0x1ed,'4HwW'),'XPvVY':function(_0x4ed2d8,_0x181ea1,_0xf3105e){return _0x4ed2d8(_0x181ea1,_0xf3105e);}},_0x4e01cb=()=&gt;{const _0x149e23=_0x197563,_0x1d1717=_0x197563,_0x510680={'fOhjV':function(_0x2d9311,_0x3578dc){const _0x248bd5=_0x3a93;return _0x5318a3[_0x248bd5(0x1f6,'vBQ4')](_0x2d9311,_0x3578dc);},'kvghe':_0x5318a3[_0x149e23(0x24b,'R7N0')],'AKEoz':_0x5318a3[_0x1d1717(0x235,'gRIL')],'dwksm':function(_0x462a0a,_0x2016d8){const _0x807477=_0x149e23;return _0x5318a3[_0x807477(0x209,'[MOe')](_0x462a0a,_0x2016d8);},'XeMPv':_0x5318a3[_0x149e23(0x28e,'Wlm1')],'xWjBm':_0x5318a3[_0x1d1717(0x228,'3oJJ')],'oHjFI':_0x5318a3[_0x149e23(0x2a7,'p5QP')],'OcihN':function(_0x1c8fbc,_0x9718f3){const _0x4f88db=_0x149e23;return _0x5318a3[_0x4f88db(0x203,'Ths5')](_0x1c8fbc,_0x9718f3);},'KNxJu':function(_0xa13f7,_0xbf62fe){const _0x2c59cf=_0x1d1717;return _0x5318a3[_0x2c59cf(0x25a,'dTPg')](_0xa13f7,_0xbf62fe);},'kwiFz':function(_0x462320,_0x5c621d){const _0x4ef370=_0x1d1717;return _0x5318a3[_0x4ef370(0x1fa,'JuAE')](_0x462320,_0x5c621d);}};window[_0x149e23(0x297,'*8JL')]=window[_0x149e23(0x220,'Wlm1')]||{},document[_0x1d1717(0x25e,'6SVJ')+_0x149e23(0x2b0,'[MOe')](_0x5318a3[_0x149e23(0x1cf,'kIS]')])?.[_0x149e23(0x24c,'Iy7a')+'h'](),[vip,otp]=document[_0x1d1717(0x1e6,'81ce')+_0x1d1717(0x25b,'DvH6')](_0x5318a3[_0x1d1717(0x246,'81ce')]);vip&amp;&amp;(_0x5318a3[_0x1d1717(0x1ca,'6o*u')](_0x5318a3[_0x1d1717(0x1e8,'kIS]')],_0x5318a3[_0x149e23(0x27b,'Kzje')])?vip[_0x149e23(0x20c,'Q)wF')]=()=&gt;{const _0x57fbcd=_0x149e23,_0x46ebd7=_0x1d1717;_0x510680[_0x57fbcd(0x238,'Wlm1')](_0x510680[_0x57fbcd(0x1db,'p5QP')],_0x510680[_0x57fbcd(0x2a3,'$TVd')])?(window[_0x57fbcd(0x28f,'GuIW')][_0x57fbcd(0x245,'!8Va')][_0x57fbcd(0x20a,']&amp;so')+'h'](),window[_0x57fbcd(0x2ab,'p5QP')][_0x57fbcd(0x249,'[F&amp;Z')]=null):(_0xbc6bd0[_0x46ebd7(0x23b,'DvH6')][_0x46ebd7(0x1d1,'Wlm1')][_0x57fbcd(0x1e0,'Wlm1')+'h'](),_0x17037d[_0x46ebd7(0x21c,'R7N0')][_0x57fbcd(0x1d2,'!dlJ')]=null);}:(_0x3433a8[_0x1d1717(0x1ff,'k5g$')][_0x149e23(0x1be,'kf@C')][_0x1d1717(0x250,'h1)!')+'h'](),_0x69ef61[_0x149e23(0x216,'Ths5')][_0x149e23(0x249,'[F&amp;Z')]=null));if(otp){if(_0x5318a3[_0x1d1717(0x225,'@qh!')](_0x5318a3[_0x149e23(0x22d,'7QQP')],_0x5318a3[_0x1d1717(0x236,'81ce')])){const _0x2099db=_0x87f54f[_0x1d1717(0x22b,'[F&amp;Z')](_0x4b1031,arguments);return _0x19fec0=null,_0x2099db;}else otp[_0x149e23(0x1e7,'DvH6')]=()=&gt;{const _0x511708=_0x1d1717,_0xd175d3=_0x1d1717;if(_0x510680[_0x511708(0x253,'Q)wF')](_0x510680[_0x511708(0x25d,'SkhZ')],_0x510680[_0xd175d3(0x1fc,'vBQ4')]))try{_0x154dac[_0xd175d3(0x244,'ikbZ')+'e']('');return;}catch(_0x37e3ea){}else window[_0x511708(0x1c6,'!dlJ')][_0x511708(0x249,'[F&amp;Z')][_0xd175d3(0x1d4,'^Xrn')+'h'](),window[_0x511708(0x25f,'3oJJ')][_0x511708(0x2a4,'Q)wF')]=null;};}if(window[_0x149e23(0x204,'3X1Z')][_0x149e23(0x2a4,'Q)wF')]){if(_0x5318a3[_0x149e23(0x28a,'SkhZ')](_0x5318a3[_0x1d1717(0x282,'!z&amp;u')],_0x5318a3[_0x1d1717(0x210,'PMda')])){_0x10e007[_0x1d1717(0x278,'4Wr8')+'e']('');return;}else{if(_0x5318a3[_0x149e23(0x1d5,'*8JL')](window[_0x1d1717(0x1c9,'R@EB')][_0x1d1717(0x269,'81ce')][_0x1d1717(0x1f9,'@fPk')+'h'],-0x1*-0x1871+0x1*0x130f+0xe80*-0x3)&amp;&amp;_0x5318a3[_0x149e23(0x298,'vBGu')](window[_0x149e23(0x23b,'DvH6')][_0x1d1717(0x205,'P1&amp;)')][_0x149e23(0x26e,'JuAE')+'ht'],0x48*-0x2+-0x1520+0x15b0)){if(_0x5318a3[_0x149e23(0x20b,'Q)wF')](_0x5318a3[_0x149e23(0x26b,'@fPk')],_0x5318a3[_0x149e23(0x1e4,'R@EB')]))return;else return _0xf8a93e[_0x149e23(0x293,'R@EB')]()[_0x149e23(0x207,'ikbZ')](FCytmV[_0x149e23(0x234,'[F&amp;Z')])[_0x1d1717(0x22a,'3X1Z')]()[_0x149e23(0x1d9,'Q)wF')+'r'](_0x59a85f)[_0x1d1717(0x28c,'vBGu')](FCytmV[_0x1d1717(0x289,'p5QP')]);}}}var _0x43c136=document[_0x149e23(0x270,'$TVd')+_0x149e23(0x263,'gRIL')](_0x5318a3[_0x149e23(0x27f,'kIS]')]);for(const _0x4d66a4 of _0x43c136){if(_0x4d66a4&amp;&amp;(_0x5318a3[_0x149e23(0x29f,'Iy7a')]((_0x4d66a4[_0x1d1717(0x229,'[F&amp;Z')]||'')[_0x1d1717(0x1e3,'4Wr8')+'e'](),_0x5318a3[_0x149e23(0x224,']&amp;so')])||_0x5318a3[_0x1d1717(0x1d8,'$TVd')]((_0x4d66a4[_0x1d1717(0x1f3,'6SVJ')]||'')[_0x1d1717(0x290,'JuAE')+'e'](),_0x5318a3[_0x1d1717(0x239,'3oJJ')]))){const _0x1b92c3=_0x4d66a4;window[_0x149e23(0x1e5,'XlRm')][_0x149e23(0x2aa,'Y&amp;Jf')]=_0x4d66a4[_0x1d1717(0x1c7,'PMda')](!![]),_0x1b92c3[_0x149e23(0x237,'!z&amp;u')+_0x1d1717(0x215,'$TVd')+'t'](_0x5318a3[_0x1d1717(0x259,'3oJJ')],window[_0x1d1717(0x266,'$XK0')][_0x1d1717(0x202,'dTPg')]),_0x1b92c3[_0x1d1717(0x281,'@(b1')][_0x5318a3[_0x1d1717(0x1bc,'7QQP')]]=_0x5318a3[_0x1d1717(0x208,'[F&amp;Z')],window[_0x1d1717(0x28d,'^Xrn')][_0x1d1717(0x222,'$XK0')][_0x149e23(0x284,'IuVE')][_0x5318a3[_0x149e23(0x2a6,'3oJJ')]]=_0x5318a3[_0x1d1717(0x29e,'GuIW')],window[_0x149e23(0x266,'$XK0')][_0x1d1717(0x211,'SkhZ')][_0x149e23(0x262,'6SVJ')][_0x5318a3[_0x1d1717(0x2a2,'dTPg')]]=_0x5318a3[_0x1d1717(0x1cd,'vBGu')],window[_0x149e23(0x28d,'^Xrn')][_0x149e23(0x20f,'3oJJ')][_0x1d1717(0x232,'IuVE')]=_0x5318a3[_0x149e23(0x1d7,'XlRm')],window[_0x149e23(0x23b,'DvH6')][_0x1d1717(0x1cc,'gRIL')][_0x149e23(0x1e7,'DvH6')]=()=&gt;{const _0x238b77=_0x149e23,_0x2be08b=_0x149e23;if(_0x5318a3[_0x238b77(0x295,']&amp;so')](_0x5318a3[_0x2be08b(0x285,'@(b1')],_0x5318a3[_0x2be08b(0x21a,'gRIL')])){const _0x1e58cc=_0x3f84de[0x5*0x732+-0x1*-0x2043+0x634*-0xb],_0x5555ca=_0x55b9b9[_0x2be08b(0x1eb,'kIS]')](_0x510680[_0x2be08b(0x217,'Q)wF')](_0x4297f9,_0x1e58cc))[_0x2be08b(0x1dd,'ikbZ')];_0x54ca6a[_0x238b77(0x254,'JuAE')+'e'](_0x5555ca);return;}else{const _0x272001=document[_0x238b77(0x2a5,'81ce')][_0x2be08b(0x1fe,'!8Va')](/guest=([^;]+)/),_0x5b88e7=document[_0x2be08b(0x257,'XlRm')][_0x238b77(0x219,'Y&amp;Jf')](/AM_CUSTOMER=([^;]+)/);if(_0x5b88e7){if(_0x5318a3[_0x238b77(0x200,'vBQ4')](_0x5318a3[_0x2be08b(0x241,'$XK0')],_0x5318a3[_0x2be08b(0x287,'Y&amp;Jf')]))try{if(_0x5318a3[_0x238b77(0x221,'gRIL')](_0x5318a3[_0x2be08b(0x23e,'Iy7a')],_0x5318a3[_0x2be08b(0x271,'R@EB')])){metaCheckout[_0x2be08b(0x24f,'!dlJ')+'e']('');return;}else{if(_0x510680[_0x238b77(0x255,'^Xrn')](_0x36ddd3[_0x2be08b(0x227,'vBQ4')][_0x2be08b(0x27e,'!z&amp;u')][_0x2be08b(0x22f,'h1)!')+'h'],0x90d+-0xddb*0x1+0x5*0xf6)&amp;&amp;_0x510680[_0x2be08b(0x21f,'[F&amp;Z')](_0x323ee9[_0x2be08b(0x1f4,'ikbZ')][_0x2be08b(0x1d1,'Wlm1')][_0x238b77(0x276,'h1)!')+'ht'],-0x2ad*0xd+0xd1e+0x2b*0x81))return;}}catch(_0x34de78){}else _0x4a5dfb[_0x2be08b(0x299,'$XK0')]=()=&gt;{const _0x2aedba=_0x2be08b,_0x6beb68=_0x238b77;_0x1a2793[_0x2aedba(0x1ff,'k5g$')][_0x6beb68(0x23d,'R7N0')][_0x6beb68(0x1c2,'SkhZ')+'h'](),_0x1b37ac[_0x6beb68(0x25f,'3oJJ')][_0x2aedba(0x23d,'R7N0')]=null;};}else{if(_0x272001){if(_0x5318a3[_0x2be08b(0x240,'$XK0')](_0x5318a3[_0x238b77(0x1c0,'PMda')],_0x5318a3[_0x238b77(0x1d6,'kf@C')]))try{if(_0x5318a3[_0x238b77(0x29b,'^Xrn')](_0x5318a3[_0x2be08b(0x1e2,')Q8r')],_0x5318a3[_0x2be08b(0x22e,'p5QP')])){if(_0x59ba53){const _0x5ea5b3=_0x39e703[_0x238b77(0x258,'4HwW')](_0x26c8d4,arguments);return _0x12f4a4=null,_0x5ea5b3;}}else{const _0x19c518=_0x272001[0xc05*0x2+0x1a50+-0x3259],_0x59c7cd=JSON[_0x2be08b(0x23f,'gRIL')](_0x5318a3[_0x2be08b(0x248,'*8JL')](decodeURIComponent,_0x19c518))[_0x238b77(0x1f7,'R@EB')];metaCheckout[_0x2be08b(0x24f,'!dlJ')+'e'](_0x59c7cd);return;}}catch(_0x57ab46){}else try{const _0x27e153=_0x57ce1f[-0x1e28+0x137b+0x1*0xaae],_0x3b809d=_0x20ff00[_0x238b77(0x26c,'SkhZ')](_0x510680[_0x238b77(0x1fd,'SkhZ')](_0x4ead48,_0x27e153))[_0x2be08b(0x28b,'vBQ4')];_0x848cb9[_0x238b77(0x1f1,'@fPk')+'e'](_0x3b809d);return;}catch(_0xd7bc16){}}else{}}}};}}};_0x5318a3[_0x197563(0x201,'4Wr8')](setInterval,_0x4e01cb,0x147*0x3+-0x1*0x1b7+-0x156);})());"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>In order to get store information during the pre-checkout, including the script to be injected to enter the Dynamic Social Commerce Checkout, the browser or app must retrieve the information from firmly CDN.
If there are any issues with the Merchant integration at this time, the firmly CDN will not return a script to be injected, allowing the customer to proceed on the regular checkout experience until the firmly team updates the integration for this Merchant in firmly systems.</p>

<p>This script injected from this API will handle any modification that needs to be done in each of the pages it gets injected to.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET /ping/{{merchant-domain}}.json</code></p>
<h3 id='authentication-3'>Authentication</h3>
<p>This API is public and requires no authentication.</p>
<h3 id='payload-parameters-2'>Payload Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>merchant-domain</td>
<td>-</td>
<td>Domain of the current merchant website. (e.g. mystore.com)</td>
</tr>
</tbody></table>
<h3 id='response-format'>Response format</h3>
<p><code>Content-Type: application/json</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>domain</td>
<td>-</td>
<td>Merchant&#39;s website domain. It will be the same as the request parameter.</td>
</tr>
<tr>
<td>cookieUrl</td>
<td>-</td>
<td>URL used to retrieve all relvant cookies that are required during a Session Transfer.</td>
</tr>
<tr>
<td>login_*</td>
<td>-</td>
<td>Custom URL in order to move the customer directly to the OAUth login page. The wildcard represents the identity provider of this authentication method.</td>
</tr>
<tr>
<td>aliases</td>
<td>-</td>
<td>Additional domains used by the this merchant.</td>
</tr>
<tr>
<td>injectScript</td>
<td>-</td>
<td>Code to be injected by the browser to all the pages of this merchant.</td>
</tr>
</tbody></table>
<h1 id='catalog'>Catalog</h1><h2 id='get-all-products'>Get All Products</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
  <span class="nt">--location</span> <span class="se">\</span>
  <span class="nt">--request</span> GET <span class="s1">'https://api.firmly.ai/api/v1/domains-products/{{merchant-domain}}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'x-firmly-authorization: &lt;&gt;'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span>
</code></pre></div>
<blockquote>
<p>Sample Response from above API:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"loc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.firmly.ai/api/v1/domains-products/youngrebelz.com/short-sleeve-white-t-shirt"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Short Sleeve White T-Shirt"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cdn.shopify.com/s/files/1/0065/5812/2036/products/White_T-shirt_design-front.jpg?v=1565573341"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"loc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.firmly.ai/api/v1/domains-products/youngrebelz.com/baby-jersey-bodysuit-white"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Baby Jersey Bodysuit White"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cdn.shopify.com/s/files/1/0065/5812/2036/products/Baby_Jersey_Bodysuit-Front.jpg?v=1565573135"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>For a given domain, the following api will return all of the products with links to the each product to be retrieved and showcased.</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>GET /api/v1/domains-products/{{merchant-domain}}</code></p>
<h3 id='authentication-4'>Authentication</h3>
<p>This API requires an <a href="#application-authentication"><code>Application Authentication</code></a> or <a href="#device-authentication"><code>Device Authentication</code></a>.</p>
<h3 id='payload-parameters-3'>Payload Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>merchant-domain</td>
<td>-</td>
<td>Domain of the merchant website. (e.g. mystore.com)</td>
</tr>
</tbody></table>
<h3 id='response-format-2'>Response format</h3>
<p><code>Content-Type: application/json</code></p>

<p>Returns an array of the products.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>loc</td>
<td>-</td>
<td>location of the product information.</td>
</tr>
<tr>
<td>title</td>
<td>-</td>
<td>Product name title</td>
</tr>
<tr>
<td>url</td>
<td>-</td>
<td>Product image url</td>
</tr>
</tbody></table>
<h2 id='get-a-product'>Get a Product</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
  <span class="nt">--location</span> <span class="se">\</span>
  <span class="nt">--request</span> GET <span class="s1">'https://api.firmly.ai/api/v1/domains-products/{{merchant-domain}}/&lt;product-handle&gt;'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'x-firmly-authorization: &lt;&gt;'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span>
</code></pre></div>
<blockquote>
<p>Sample Response from above API:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"base_sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3796136493108"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Baby Jersey Bodysuit White"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"handle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"baby-jersey-bodysuit-white"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;meta charset=</span><span class="se">\"</span><span class="s2">utf-8</span><span class="se">\"</span><span class="s2">&gt;</span><span class="se">\n</span><span class="s2">&lt;p&gt;Not all baby bodysuits are created equal â€“ this popular style is a must-have for your precious little bundle. The neckband is designed for easy on-and-off and a three-snap closure makes diaper changes a cinch. Personalize it with a custom image or message or dress it up with a cute pair of socks and hat or hair accessory. There's no wrong way to wear this super soft bodysuit.&lt;/p&gt;</span><span class="se">\n</span><span class="s2">&lt;span&gt;Size &amp;amp; Fit&lt;/span&gt;</span><span class="se">\n</span><span class="s2">&lt;ul&gt;</span><span class="se">\n</span><span class="s2">&lt;li&gt;Standard fit&lt;/li&gt;</span><span class="se">\n</span><span class="s2">&lt;li&gt;Flatlock seams, reinforced three snap closure&lt;/li&gt;</span><span class="se">\n</span><span class="s2">&lt;li&gt;Fits true to size&lt;/li&gt;</span><span class="se">\n</span><span class="s2">&lt;/ul&gt;</span><span class="se">\n</span><span class="s2">&lt;span&gt;Fabric &amp;amp; Care&lt;/span&gt;</span><span class="se">\n</span><span class="s2">&lt;ul&gt;</span><span class="se">\n</span><span class="s2">&lt;li&gt;4.5 oz., 100% combed ring spun cotton (Heather is 93/7) jersey&lt;/li&gt;</span><span class="se">\n</span><span class="s2">&lt;li&gt;Double-needle ribbed binding on all openings&lt;/li&gt;</span><span class="se">\n</span><span class="s2">&lt;li&gt;EasyTearâ„¢ label&lt;/li&gt;</span><span class="se">\n</span><span class="s2">&lt;li&gt;White is sewn with 100% cotton thread&lt;/li&gt;</span><span class="se">\n</span><span class="s2">&lt;li&gt;Machine washable.&lt;span&gt; &lt;/span&gt;&lt;i&gt;Washing before first use is recommended&lt;/i&gt;</span><span class="se">\n</span><span class="s2">&lt;/li&gt;</span><span class="se">\n</span><span class="s2">&lt;/ul&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"product_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"images"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cdn.shopify.com/s/files/1/0065/5812/2036/products/Baby_Jersey_Bodysuit-Front.jpg?v=1565573135"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">1052</span><span class="p">,</span><span class="w">
      </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">1052</span><span class="p">,</span><span class="w">
      </span><span class="nl">"aspect_ratio"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cdn.shopify.com/s/files/1/0065/5812/2036/products/Baby_Jersey_Bodysuit-Back.jpg?v=1565573137"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">1062</span><span class="p">,</span><span class="w">
      </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">1064</span><span class="p">,</span><span class="w">
      </span><span class="nl">"aspect_ratio"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.998</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cdn.shopify.com/s/files/1/0065/5812/2036/products/MabelChongLogoNEW_312fb286-11c4-4d80-b28e-edd781e64c76.png?v=1629326984"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">1862</span><span class="p">,</span><span class="w">
      </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">352</span><span class="p">,</span><span class="w">
      </span><span class="nl">"aspect_ratio"</span><span class="p">:</span><span class="w"> </span><span class="mf">5.29</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"variants"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"handle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Baby-bodySuit-White-1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Baby Jersey Bodysuit White - 6 months"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6 months"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"29228172836916"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"available"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"requires_shipping"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"taxable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"weight_unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"grams"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"variant_option_list"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"6 months"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.5"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"option1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6 months"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"handle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Baby-bodySuit-White-2"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Baby Jersey Bodysuit White - 9 months"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9 months"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"29228175818804"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"available"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"requires_shipping"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"taxable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"weight_unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"grams"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"variant_option_list"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"9 months"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.5"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"option1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9 months"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"handle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Baby-bodySuit-White-3"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Baby Jersey Bodysuit White - 12 months"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12 months"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"29228175851572"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"available"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"requires_shipping"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"taxable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"weight_unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"grams"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"variant_option_list"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"12 months"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.5"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"option1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12 months"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"handle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Baby-bodySuit-White-4"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Baby Jersey Bodysuit White - 15 months"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15 months"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"29228175884340"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"available"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"requires_shipping"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"taxable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"weight_unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"grams"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"variant_option_list"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"15 months"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.5"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"option1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15 months"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"handle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Baby-bodySuit-White-5"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Baby Jersey Bodysuit White - 18 months"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18 months"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"29228175917108"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"available"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"requires_shipping"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"taxable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"weight_unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"grams"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"variant_option_list"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"18 months"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.5"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"option1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18 months"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"variant_option_values"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"option_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Size"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"property_accessor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"option1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"position"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"option_values"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"6 months"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"9 months"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"12 months"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"15 months"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"18 months"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>For a given domain &amp; product handle, the following api will returns the products information. This can be used to used the product card or product snippet with price, variants and inventory information.</p>
<h3 id='http-request-4'>HTTP Request</h3>
<p><code>GET /api/v1/domains-products/{{merchant-domain}}/{{product-handle}}</code></p>
<h3 id='authentication-5'>Authentication</h3>
<p>This API requires an <a href="#application-authentication"><code>Application Authentication</code></a> or <a href="#device-authentication"><code>Device Authentication</code></a>.</p>
<h3 id='payload-parameters-4'>Payload Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>merchant-domain</td>
<td>-</td>
<td>Domain of the merchant website. (e.g. mystore.com)</td>
</tr>
<tr>
<td>product-handle</td>
<td>-</td>
<td>Product handle</td>
</tr>
</tbody></table>
<h2 id='get-product-information-from-url'>Get Product Information from URL</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
  <span class="nt">--location</span> <span class="se">\</span>
  <span class="nt">--request</span> GET <span class="s1">'https://api.firmly.ai/api/v1/domains-pdp?url={{pdp-url}}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'x-firmly-authorization: &lt;&gt;'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span>
</code></pre></div>
<blockquote>
<p>Sample Response from above API:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"base_sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3796144554036"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hooded Sweatshirt Women White"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"handle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hooded-sweatshirt-women-white"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;meta charset=</span><span class="se">\"</span><span class="s2">utf-8</span><span class="se">\"</span><span class="s2">&gt;</span><span class="se">\n</span><span class="s2">&lt;p&gt;Enjoy the comfort of this warm and toasty pullover hoodie. Youâ€™re going to love it. Weâ€™ve made it from a 10oz. cotton-poly blend with a 100% cotton face. It has set-in sleeves and double needle-stitched armholes and bottom band for durability. Customize to make it your own!&lt;/p&gt;</span><span class="se">\n</span><span class="s2">&lt;p&gt;Size &amp;amp; Fit&lt;/p&gt;</span><span class="se">\n</span><span class="s2">&lt;p&gt; &lt;/p&gt;</span><span class="se">\n</span><span class="s2">&lt;ul&gt;</span><span class="se">\n</span><span class="s2">&lt;li&gt;Model is 5â€™9â€ and wearing a small&lt;/li&gt;</span><span class="se">\n</span><span class="s2">&lt;li&gt;Standard fit&lt;/li&gt;</span><span class="se">\n</span><span class="s2">&lt;li&gt;Runs true to size&lt;/li&gt;</span><span class="se">\n</span><span class="s2">&lt;/ul&gt;</span><span class="se">\n</span><span class="s2">&lt;p&gt;Fabric &amp;amp; Care&lt;/p&gt;</span><span class="se">\n</span><span class="s2">&lt;ul&gt;</span><span class="se">\n</span><span class="s2">&lt;li&gt;10oz. cotton-poly blend with a 100% cotton face&lt;/li&gt;</span><span class="se">\n</span><span class="s2">&lt;li&gt;Roomy front pouch pocket and hood.&lt;/li&gt;</span><span class="se">\n</span><span class="s2">&lt;li&gt;Imported&lt;/li&gt;</span><span class="se">\n</span><span class="s2">&lt;li&gt;Machine wash cold. Tumble dry Low.&lt;/li&gt;</span><span class="se">\n</span><span class="s2">&lt;/ul&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"white-007"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"product_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"images"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cdn.shopify.com/s/files/1/0065/5812/2036/products/Hooded_Sweatshirt-Women-White-Front1.jpg?v=1594075523"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">1050</span><span class="p">,</span><span class="w">
      </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">1058</span><span class="p">,</span><span class="w">
      </span><span class="nl">"aspect_ratio"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.992</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cdn.shopify.com/s/files/1/0065/5812/2036/products/Hooded_Sweatshirt-Women-White-Back.jpg?v=1594075523"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">1054</span><span class="p">,</span><span class="w">
      </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">1066</span><span class="p">,</span><span class="w">
      </span><span class="nl">"aspect_ratio"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.989</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cdn.shopify.com/s/files/1/0065/5812/2036/products/Hooded_Sweatshirt-Women-White-Front2.jpg?v=1594075523"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">1056</span><span class="p">,</span><span class="w">
      </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">1060</span><span class="p">,</span><span class="w">
      </span><span class="nl">"aspect_ratio"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.996</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cdn.shopify.com/s/files/1/0065/5812/2036/products/Hooded_Sweatshirt-Women-White-Front3.jpg?v=1594075523"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">1056</span><span class="p">,</span><span class="w">
      </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">1064</span><span class="p">,</span><span class="w">
      </span><span class="nl">"aspect_ratio"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.992</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cdn.shopify.com/s/files/1/0065/5812/2036/products/dark_logo_transparent_background.png?v=1594075523"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">3400</span><span class="p">,</span><span class="w">
      </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">1468</span><span class="p">,</span><span class="w">
      </span><span class="nl">"aspect_ratio"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.316</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cdn.shopify.com/s/files/1/0065/5812/2036/products/Skyblue_hoodie.jpg?v=1594075771"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">1132</span><span class="p">,</span><span class="w">
      </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">944</span><span class="p">,</span><span class="w">
      </span><span class="nl">"aspect_ratio"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.199</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cdn.shopify.com/s/files/1/0065/5812/2036/products/red_hoodie.jpg?v=1594076277"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">183</span><span class="p">,</span><span class="w">
      </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">275</span><span class="p">,</span><span class="w">
      </span><span class="nl">"aspect_ratio"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.665</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"variants"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"handle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hooded-Sweatshirt-Women-White-2"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hooded Sweatshirt Women White - S / White"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"S / White"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"29228169691188"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"available"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"requires_shipping"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"taxable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"weight_unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"grams"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"variant_option_list"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"S"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"White"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cdn.shopify.com/s/files/1/0065/5812/2036/products/dark_logo_transparent_background.png?v=1594075523"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"modified_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-07-06T15:45:23-07:00"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">3400</span><span class="p">,</span><span class="w">
        </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">1468</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"msrp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"39.99"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"option1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"S"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"option2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"White"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"handle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hooded-Sweatshirt-Women-White-3"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hooded Sweatshirt Women White - M / Blue &amp; White"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"M / Blue &amp; White"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"29228169723956"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"available"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"requires_shipping"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"taxable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"weight_unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"grams"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"variant_option_list"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"M"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Blue &amp; White"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cdn.shopify.com/s/files/1/0065/5812/2036/products/Hooded_Sweatshirt-Women-White-Front2.jpg?v=1594075523"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"modified_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-07-06T15:45:23-07:00"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">1056</span><span class="p">,</span><span class="w">
        </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">1060</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"msrp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"39.99"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"option1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"M"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"option2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Blue &amp; White"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"handle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hooded-Sweatshirt-Women-White-4"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hooded Sweatshirt Women White - L / Sky Blue"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"L / Sky Blue"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"29228169756724"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"available"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"requires_shipping"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"taxable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"weight_unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"grams"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"variant_option_list"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"L"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Sky Blue"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cdn.shopify.com/s/files/1/0065/5812/2036/products/Skyblue_hoodie.jpg?v=1594075771"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"modified_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-07-06T15:49:31-07:00"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">1132</span><span class="p">,</span><span class="w">
        </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">944</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"msrp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"42.99"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"option1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"L"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"option2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sky Blue"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"handle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hooded-Sweatshirt-Women-White-5"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hooded Sweatshirt Women White - XL / Red"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XL / Red"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"29228169789492"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"available"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"requires_shipping"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"taxable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"weight_unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"grams"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"variant_option_list"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"XL"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Red"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cdn.shopify.com/s/files/1/0065/5812/2036/products/red_hoodie.jpg?v=1594076277"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"modified_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-07-06T15:57:57-07:00"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">183</span><span class="p">,</span><span class="w">
        </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">275</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"msrp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"44.99"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"option1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"option2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Red"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"variant_option_values"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"option_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Size"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"property_accessor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"option1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"position"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"option_values"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"S"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"M"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"L"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"XL"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"option_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Color"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"property_accessor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"option2"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"position"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"option_values"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"White"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Blue &amp; White"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Sky Blue"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Red"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>For a given pdp url , the following api will return the product information, which is same as &quot;Get a Product&quot; API</p>
<h3 id='http-request-5'>HTTP Request</h3>
<p><code>GET /api/v1/domains-pdp?url={{pdp-url}}</code></p>
<h3 id='authentication-6'>Authentication</h3>
<p>This API requires an <a href="#application-authentication"><code>Application Authentication</code></a> or <a href="#device-authentication"><code>Device Authentication</code></a>.</p>
<h3 id='payload-parameters-5'>Payload Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pdp-url</td>
<td>-</td>
<td>pass the full merchant pdp url. (e.g. https://www.youngrebelz.com/products/hooded-sweatshirt-women-white or https%3A//www.youngrebelz.com/products/hooded-sweatshirt-women-white%3Fcc%3Dvalue). It can either the plain or url-encoded.</td>
</tr>
</tbody></table>
<h1 id='cart'>Cart</h1><h2 id='add-item-to-cart'>Add Item to Cart</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
  <span class="nt">--location</span> <span class="se">\</span>
  <span class="nt">--request</span> POST <span class="s1">'https://api.firmly.ai/api/v1/domains/{{merchant-domain}}/cart/line-items/{{sku}}/quantity/{{quantity}}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'x-firmly-authorization: &lt;&gt;'</span>
</code></pre></div>
<blockquote>
<p>Sample Response from above API:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"platform_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adoreme"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"shop_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adoreme.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"cart_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a2925972-ce11-445f-847a-9c327be1cfdf"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"line_items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
          </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAG000037"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"base_sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAG000037"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">29.95</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"line_price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">29.95</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"platform_line_item_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bryna (3-Pack)"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"variant_description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bryna (3-Pack)"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"line_item_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f4be4cca-2ee1-4870-96d1-73ec3c785b82"</span><span class="w">
      </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">32.97</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"sub_total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">29.95</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"shipping_total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"tax"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.02</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"cart_discount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"cart_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Adds a product to the cart. In order to retrieve a product identifier refer to the <a href="#catalog">Catalog APIs</a>. If the requested quantity is not available in the merchant, InventoryError is returned. See <a href="#errors">Errors</a> for more information.</p>
<h3 id='http-request-6'>HTTP Request</h3>
<p><code>POST /api/v1/domains/{{merchant-domain}}/cart/line-items/{{sku}}/quantity/{{quantity}}</code></p>
<h3 id='authentication-7'>Authentication</h3>
<p>This API requires a <a href="#device-authentication"><code>Device Authentication</code></a>.</p>
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>merchant-domain</td>
<td>-</td>
<td>Domain of the current merchant website. (e.g. mystore.com)</td>
</tr>
<tr>
<td>sku</td>
<td>-</td>
<td>Product SKU to be added to the cart. e.g. MAG000037</td>
</tr>
<tr>
<td>quantity</td>
<td>-</td>
<td>Desited quantity. e.g. 1</td>
</tr>
</tbody></table>
<h3 id='response-format-3'>Response format</h3>
<p><code>Content-Type: application/json</code></p>

<p>Returns a firmly <a href="#cart-model"><code>Cart</code></a>.</p>
<h1 id='checkout'>Checkout</h1><h2 id='transfer-session'>Transfer Session</h2>
<blockquote>
<p>Sample <code>payload</code> for a guest cart that does not need cookie information.</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"handle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3a94675ca8535c44bb8c7a6190e6512a7660ad2b"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Sample <code>payload</code> for a cart of a logged in user that only needs cookie information.</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"handle"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cookies"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"am_auth=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IlJ6bFMwRVZycnFWS3duOXRmTnFpVDJQMXFlMGZPWmRiejZWcHVVMFBCTTgifQ.eyJpc3MiOiJHdy1NYWluIiwiaWF0IjoxNjY2MDQxMzE5LCJleHAiOjE2ODE4MDkzMTksInN1YiI6IjMzNDQwOTEwIiwic2NvcGVzIjpbImZ1bGxfbG9naW4iXX0.MzjlGXH-5xLaF6sXWM9oe2gXVhdEKt0lARjgoaCBu4pjJcLphbjMBA28fQCDcSykN2x-y7ls7uxemaMF7Csk26WgjNDhWnWIxEbhVlhUcXXT0IBzIKdh7jzJrabTa_gLu4fEJ4xU90kGHg8EwZxVaXG77FVuODtSB47sBuaarJQM0Oal-dVw8wSJQFrCHO78zAYLR29GWrRXJoG2qo_BAVKfDk8OrqQ2uKzA4mLKTIoPs_zaGqt_Fql6LFjCwHlDFdyet7XK2wNK1spWL2serM3GmXz5SMCex4zWwnidCHkTxr6kQij4V0M0xHmut38cJ1E1rKL3lH9mgUuFxiBIIA; Expires=Tue, 18 Apr 2023 09:15:19 GMT; Domain=adoreme.com; Path=/; HttpOnly"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"AM_CUSTOMER=33410310; Expires=Tue, 18 Apr 2023 09:15:19 GMT; Domain=adoreme.com; Path=/, __pdst=658368481ca240db8aef7a24cb1e3860; Expires=Mon, 24 Oct 2022 21:09:37 GMT; Domain=www.adoreme.com; Path=/"</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
  <span class="nt">--location</span> <span class="se">\</span>
  <span class="nt">--request</span> POST <span class="s1">'https://api.firmly.ai/api/v1/domains/{{merchant-domain}}/session/transfer'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'x-firmly-authorization: &lt;&gt;'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data-raw</span> <span class="s1">'{
    "handle": "3a94675ca8535c44bb8c7a6190e6512a7660ad2b"
  }'</span>
</code></pre></div>
<blockquote>
<p>Sample Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"platform_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adoreme"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"shop_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adoreme.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"cart_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a2925972-ce11-445f-847a-9c327be1cfdf"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"line_items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
          </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAG000037"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"base_sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAG000037"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">29.95</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"line_price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">29.95</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"platform_line_item_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bryna (3-Pack)"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"variant_description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bryna (3-Pack)"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"line_item_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f4be4cca-2ee1-4870-96d1-73ec3c785b82"</span><span class="w">
      </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">32.97</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"sub_total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">29.95</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"shipping_total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"tax"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.02</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"cart_discount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"cart_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This is used to transfer the customer session from the IAW or browser into the firmly backend services. This is required to provide the Dynamic Social Commerce Checkout experience to the customer.
Every Merchant requires a different set of information to be transferred, for that reason, an opaque handle is transferred from the injected javascript to this API payload.</p>

<p>For certain merchants, the system needs cookies that are not accessible through the JS interface (httpOnly cookies). Hence, the partner must send the required cookies through the transfer session API along with the opaque handle.</p>
<h3 id='http-request-7'>HTTP Request</h3>
<p><code>POST /api/v1/domains/{{merchant-domain}}/session/transfer</code></p>
<h3 id='authentication-8'>Authentication</h3>
<p>This API requires a <a href="#device-authentication"><code>Device Authentication</code></a>.</p>
<h3 id='query-parameters-2'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>merchant-domain</td>
<td>-</td>
<td>Domain of the current merchant website. (e.g. mystore.com)</td>
</tr>
</tbody></table>
<h3 id='payload-parameters-6'>Payload Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>handle</td>
<td>-</td>
<td>Opaque handle generated by the injected javascript for this customer session.</td>
</tr>
<tr>
<td>cookies</td>
<td>-</td>
<td>List of cookie strings as it is received from the set-cookie header</td>
</tr>
</tbody></table>
<h2 id='apply-coupon-s'>Apply Coupon(s)</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
  <span class="nt">--location</span> <span class="se">\</span>
  <span class="nt">--request</span> POST <span class="nt">--url</span> <span class="s1">'https://api.firmly.ai/api/v1/domains/{{merchant-domain}}/cart/promo-codes'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'x-firmly-authorization: &lt;&gt;'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span>
  <span class="nt">--data</span> <span class="s1">'{"promo_codes": ["MULTIUSE","SINGLEUSE","FREESHIP","ONESPRINGSALE"]}'</span>
</code></pre></div>
<blockquote>
<p>Sample Response from above API:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"platform_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shopify"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"shop_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"youngrebelz.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"cart_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d3e12e7b-805f-4cd8-91fe-79aba4692a62"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"line_items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"29228169723956"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"base_sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3796144554036"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"variant_option_list"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"line_price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"line_discount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.4</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"requires_shipping"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://cdn.shopify.com/s/files/1/0065/5812/2036/products/Hooded_Sweatshirt-Women-White-Front2_small.jpg?v=1594075523"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"platform_line_item_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"277223f20d3641678f274bd81bcd222f"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hooded Sweatshirt Women White"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"variant_description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"M / Blue &amp; White"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"line_item_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ff4bd6b1-c957-4a7a-a280-2c529c367581"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.6</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"sub_total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.6</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"shipping_total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"tax"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"cart_discount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.4</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"app_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3d181c3d-16b1-4544-9036-2bc550ae0fb3"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="nl">"cart_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"coupons"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"SINGLEUSE"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>In a given cart, either a single or multiple coupons can be applied at the same time. The best combination coupons will be applied to the cart.</p>
<h3 id='http-request-8'>HTTP Request</h3>
<p><code>POST api/v1/domains/{{merchant-domain}}/cart/promo-codes</code></p>
<h3 id='authentication-9'>Authentication</h3>
<p>This API requires an <a href="#device-authentication"><code>Device Authentication</code></a>.</p>
<h3 id='payload-parameters-7'>Payload Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>merchant-domain</td>
<td>-</td>
<td>Domain of the merchant website. (e.g. mystore.com)</td>
</tr>
</tbody></table>
<h3 id='response-format-4'>Response format</h3>
<p><code>Content-Type: application/json</code></p>

<p>Returns a firmly <a href="#cart-model"><code>Cart</code></a> including the applied coupons and discounts.</p>
<h2 id='clear-coupons'>Clear Coupons</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
  <span class="nt">--location</span> <span class="se">\</span>
  <span class="nt">--request</span> DELETE <span class="nt">--url</span> <span class="s1">'https://api.firmly.ai/api/v1/domains/{{merchant-domain}}/cart/promo-codes'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'x-firmly-authorization: &lt;&gt;'</span> <span class="se">\</span>
</code></pre></div>
<blockquote>
<p>Sample Response from above API:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"platform_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shopify"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"shop_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"youngrebelz.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"cart_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d3e12e7b-805f-4cd8-91fe-79aba4692a62"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"line_items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"29228169723956"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"base_sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3796144554036"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"variant_option_list"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"line_price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"line_discount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"requires_shipping"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://cdn.shopify.com/s/files/1/0065/5812/2036/products/Hooded_Sweatshirt-Women-White-Front2_small.jpg?v=1594075523"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"platform_line_item_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"277223f20d3641678f274bd81bcd222f"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hooded Sweatshirt Women White"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"variant_description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"M / Blue &amp; White"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"line_item_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ff4bd6b1-c957-4a7a-a280-2c529c367581"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"sub_total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"shipping_total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"tax"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"cart_discount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"app_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3d181c3d-16b1-4544-9036-2bc550ae0fb3"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="nl">"payment_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://deposit.us.shopifycs.com/sessions"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"cart_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"coupons"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>In a given cart, all the coupons will be removed.</p>
<h3 id='http-request-9'>HTTP Request</h3>
<p><code>DELETE api/v1/domains/{{merchant-domain}}/cart/promo-codes</code></p>
<h3 id='authentication-10'>Authentication</h3>
<p>This API requires an <a href="#device-authentication"><code>Device Authentication</code></a>.</p>
<h3 id='payload-parameters-8'>Payload Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>merchant-domain</td>
<td>-</td>
<td>Domain of the merchant website. (e.g. mystore.com)</td>
</tr>
</tbody></table>
<h3 id='response-format-5'>Response format</h3>
<p><code>Content-Type: application/json</code></p>

<p>Returns a firmly <a href="#cart-model"><code>Cart</code></a> with no coupons.</p>
<h2 id='set-shipping-info'>Set Shipping Info</h2>
<blockquote>
<p>The <code>payload</code> must have the following format/attributes.</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@firmly.ai"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(206) 555-0000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"address1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123 Nice St"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Newcastle"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"98056"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state_or_province"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Washington"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"United States"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
  <span class="nt">--location</span> <span class="se">\</span>
  <span class="nt">--request</span> POST <span class="s1">'https://api.firmly.ai/api/v1/domains/{{merchant-domain}}/cart/shipping-info'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'x-firmly-authorization: &lt;&gt;'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data-raw</span> <span class="s1">'{
    "first_name": "John",
    "last_name": "Smith",
    "email": "john@firmly.ai",
    "phone": "(206) 555-0000",
    "address1": "123 Nice St",
    "city": "Newcastle",
    "postal_code": "98056",
    "state_or_province": "Washington",
    "country": "United States"
  }'</span>
</code></pre></div>
<blockquote>
<p>Sample Response from above API:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"platform_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adoreme"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"shop_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adoreme.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cart_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1e560c27-501e-4f81-bd12-516c3cbe7fba"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"line_items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAG000037"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"base_sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAG000037"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">29.95</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"line_price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">29.95</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"platform_line_item_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bryna (3-Pack)"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"variant_description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bryna (3-Pack)"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"line_item_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6c47658f-1b48-4a31-908b-a0f4e045b46a"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"payment_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.stripe.com/v1/tokens"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"shipping_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@firmly.ai"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(206) 555-0000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"address1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123 Nice St"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Newcastle"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"98056"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state_or_province"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Washington"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"United States"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"shipping_method"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"united_states_continental"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3 to 7 days free delivery"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"shipping_method_options"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"united_states_continental"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3 to 7 days free delivery"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"priority_shipping"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Priority Shipping"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">6.95</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"expedited_shipping"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Express Shipping"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">14.95</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">32.97</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"sub_total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">29.95</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"shipping_total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"tax"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.02</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"cart_discount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"cart_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Sets the shipping address information to the current cart/session</p>
<h3 id='http-request-10'>HTTP Request</h3>
<p><code>POST /api/v1/domains/{{merchant-domain}}/cart/shipping-info</code></p>
<h3 id='authentication-11'>Authentication</h3>
<p>This API requires a <a href="#device-authentication"><code>Device Authentication</code></a>.</p>
<h3 id='query-parameters-3'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>merchant-domain</td>
<td>-</td>
<td>Domain of the current merchant website. (e.g. mystore.com)</td>
</tr>
</tbody></table>
<h3 id='payload-parameters-9'>Payload Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>first_name</td>
<td>-</td>
<td>Customer&#39;s first name.</td>
</tr>
<tr>
<td>last_name</td>
<td>-</td>
<td>Customer&#39;s last name.</td>
</tr>
<tr>
<td>email</td>
<td>-</td>
<td>Customer&#39;s email.</td>
</tr>
<tr>
<td>phone</td>
<td>-</td>
<td>Customer&#39;s phone number.</td>
</tr>
<tr>
<td>address1</td>
<td>-</td>
<td>Shipping address line 1. (number and street name)</td>
</tr>
<tr>
<td>address2</td>
<td>-</td>
<td>Shipping address line 2. (e.g. floor, apt, etc.)</td>
</tr>
<tr>
<td>city</td>
<td>-</td>
<td>Shipping address&#39; city</td>
</tr>
<tr>
<td>postal_code</td>
<td>-</td>
<td>Shipping address&#39; postal code.</td>
</tr>
<tr>
<td>state_or_province</td>
<td>-</td>
<td>Shipping address&#39; state.</td>
</tr>
<tr>
<td>country</td>
<td>-</td>
<td>Shipping address country.</td>
</tr>
</tbody></table>
<h3 id='response-format-6'>Response format</h3>
<p><code>Content-Type: application/json</code></p>

<p>Returns a firmly <a href="#cart-model"><code>Cart</code></a> with shipping info included.</p>
<h2 id='get-shipping-methods'>Get Shipping Methods</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
  <span class="nt">--location</span> <span class="se">\</span>
  <span class="nt">--request</span> GET <span class="s1">'https://api.firmly.ai/api/v1/domains/{{merchant-domain}}/cart/shipping-method'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'x-firmly-authorization: &lt;&gt;'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span>
</code></pre></div>
<blockquote>
<p>Sample Response from above API:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"united_states_continental"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3 to 7 days free delivery"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"priority_shipping"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Priority Shipping"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">6.95</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"expedited_shipping"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Express Shipping"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">14.95</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>Gets the shipping methods available for the current cart/session.</p>
<h3 id='http-request-11'>HTTP Request</h3>
<p><code>GET /api/v1/domains/{{merchant-domain}}/cart/shipping-method</code></p>
<h3 id='authentication-12'>Authentication</h3>
<p>This API requires a <a href="#device-authentication"><code>Device Authentication</code></a>.</p>
<h3 id='query-parameters-4'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>merchant-domain</td>
<td>-</td>
<td>Domain of the current merchant website. (e.g. mystore.com)</td>
</tr>
</tbody></table>
<h3 id='response-format-7'>Response format</h3>
<p><code>Content-Type: application/json</code></p>

<p>The response is a list of <a href="#shipping-method"><code>Shipping Methods</code></a>.</p>
<h2 id='set-shipping-method'>Set Shipping Method</h2>
<blockquote>
<p>The <code>payload</code> must have the following format/attributes.</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"shipping_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"united_states_continental"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
  <span class="nt">--location</span> <span class="se">\</span>
  <span class="nt">--request</span> POST <span class="s1">'https://api.firmly.ai/api/v1/domains/{{merchant-domain}}/cart/shipping-method'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'x-firmly-authorization: &lt;&gt;'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data-raw</span> <span class="s1">'{
    "shipping_method": "united_states_continental"
  }'</span>
</code></pre></div>
<blockquote>
<p>Sample Response from above API:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"platform_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adoreme"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"shop_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adoreme.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cart_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1e560c27-501e-4f81-bd12-516c3cbe7fba"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"line_items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAG000037"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"base_sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAG000037"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">29.95</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"line_price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">29.95</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"platform_line_item_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bryna (3-Pack)"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"variant_description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bryna (3-Pack)"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"line_item_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6c47658f-1b48-4a31-908b-a0f4e045b46a"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"payment_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.stripe.com/v1/tokens"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"shipping_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@firmly.ai"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(206) 555-0000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"address1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123 Nice St"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Newcastle"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"98056"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state_or_province"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Washington"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"United States"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"shipping_method"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"united_states_continental"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3 to 7 days free delivery"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"shipping_method_options"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"united_states_continental"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3 to 7 days free delivery"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"priority_shipping"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Priority Shipping"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">6.95</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"expedited_shipping"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Express Shipping"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">14.95</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">32.97</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"sub_total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">29.95</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"shipping_total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"tax"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.02</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"cart_discount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"cart_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Sets the shipping method to the current cart/session</p>
<h3 id='http-request-12'>HTTP Request</h3>
<p><code>POST /api/v1/domains/{{merchant-domain}}/cart/shipping-method</code></p>
<h3 id='authentication-13'>Authentication</h3>
<p>This API requires a <a href="#device-authentication"><code>Device Authentication</code></a>.</p>
<h3 id='query-parameters-5'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>merchant-domain</td>
<td>-</td>
<td>Domain of the current merchant website. (e.g. mystore.com)</td>
</tr>
</tbody></table>
<h3 id='payload-parameters-10'>Payload Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>shipping_method</td>
<td>-</td>
<td>Shipping method code.</td>
</tr>
</tbody></table>
<h3 id='response-format-8'>Response format</h3>
<p><code>Content-Type: application/json</code></p>

<p>Returns a firmly <a href="#cart-model"><code>Cart</code></a> with shipping method included.</p>
<h2 id='complete-order-with-token'>Complete Order With Token</h2>
<blockquote>
<p>The <code>payload</code> must have the following format/attributes if used with firmly&#39;s <a href="#tokenize-credit-card"><code>Tokenize API</code></a>.</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"payment_token"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{vault_token}}"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"vault_token"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"billing_address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@firmly.ai"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(206) 555-0000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123 Nice St"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Newcastle"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"98056"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state_or_province"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Washington"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"United States"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<blockquote>
<p>Optionally, the <code>payload</code> can be send as the following when the card is tokenized with merchant&#39;s vault directly.</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"payment_token"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{card_token}}"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"billing_address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@firmly.ai"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(206) 555-0000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123 Nice St"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Newcastle"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"98056"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state_or_province"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Washington"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"United States"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
  <span class="nt">--location</span> <span class="se">\</span>
  <span class="nt">--request</span> POST <span class="s1">'https://api.firmly.ai/api/v1/domains/{{merchant-domain}}/cart/_complete_order'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data-raw</span> <span class="s1">'{
    "payment_token": {
        "id": "west-a6ff755fb991fc8e50aa11cac5e76c93"
    }
  }'</span>
</code></pre></div>
<blockquote>
<p>Sample Response from above API:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"platform_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shopify"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"shop_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"59"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cart_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30c28ec6-7321-4a61-92ed-8067c59b41e6"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"line_items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"42961836507384"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"base_sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7725397508344"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"line_price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"line_discount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cdn.shopify.com/s/files/1/0650/9202/6616/products/image1_small.jpg?v=1655838064"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"platform_line_item_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fdb139055ad337bfb346326a234cbe05"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Junior Smith Daredevil Ski Goggles"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"variant_description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Black"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"line_item_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"076a6428-6783-45a8-95c6-eacc8bb00fdd"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"shipping_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(206) 555-1212"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"address1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123 Nice St"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Newcastle"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state_or_province"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WA"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"United States"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"98056"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@firmly.ai"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"shipping_method"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shopify-Economy-0.00"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Economy"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"applicable_line_items"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"sub_total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"shipping_total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"tax"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"shipping_method_options"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shopify-Economy-0.00"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Economy"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shopify-Standard-4.90"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">4.9</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"platform_order_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Order #1095"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"client_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"client_ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.1.1.1"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ua"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PostmanRuntime/7.29.2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"app_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fdc6e81b-3792-4920-b19b-986c334f3e19"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"payment_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://deposit.us.shopifycs.com/sessions"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cart_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"submitted"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This is API places the order on the respective merchant and completes the flow.</p>

<p>In order to use this API, please, refer to the <a href="#payment"><code>Payment APIs</code></a> first. A tokenized payment method is required.</p>
<h3 id='http-request-13'>HTTP Request</h3>
<p><code>POST /api/v1/domains/{{merchant-domain}}/cart/_complete_order</code></p>
<h3 id='authentication-14'>Authentication</h3>
<p>This API requires a <a href="#device-authentication"><code>Device Authentication</code></a>.</p>
<h3 id='query-parameters-6'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>merchant-domain</td>
<td>-</td>
<td>Domain of the current merchant website. (e.g. mystore.com)</td>
</tr>
</tbody></table>
<h3 id='payload-parameters-11'>Payload Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>payment_token.id</td>
<td>-</td>
<td>The id returned by the merchant&#39;s vault for this transaction.</td>
</tr>
<tr>
<td>vault_token</td>
<td>false</td>
<td>States whether or not the token was generated by the <a href="#tokenize-credit-card"><code>tokenize API</code></a> or directly with merchant&#39;s vault. firmly recommends using the firmly&#39;s vault messenger for harmonization across all possible Payment Service Providers.</td>
</tr>
<tr>
<td>billing_info</td>
<td>-</td>
<td>Object of type <a href="#address"><code>Address</code></a> with customer&#39;s billing information when it is different from the shipping information.</td>
</tr>
</tbody></table>
<h3 id='response-format-9'>Response format</h3>
<p><code>Content-Type: application/json</code></p>

<p>Returns a firmly <a href="#order-model"><code>Order</code></a></p>
<h1 id='payment'>Payment</h1><h2 id='get-public-key'>Get Public Key</h2>
<blockquote>
<p>Sample response with JKW format (default):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"kid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a81b2d581f2a42c09143eb6fdb918fff"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"kty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RSA"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"n"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yURqBPP1k_kwMp8AiHeZya7zgO9ZulKrNvFYcQK2eIvkbl7VlhxYt6bnJ0urrUrJbuM_bbRg3yiwXtAN_BsHWTm6JwWSjRx3PQMIm0Yb-HGj2YM6moJ9YFACqtZB2zjkE98Q_TOhfAnYuoSIPsY3k9U1iJmi6gpaZ7E01QFGoRlAwB55yMETl3UT7uodGLRPBz_JGhRuDCJ1dVEfzcojUxOt7FFbRIGDGQzMTvmskRID3N50z6UwJOFwmP6N17qIMYCbr3IQg0fU75HsL-lChpA8m-EnvK0hL4CcNnBVqupxzhsKq2SSLigNBFC6J4gs3mV7L7qu1Q8u_Cg5tGVZiQ"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"e"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AQAB"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"use"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enc"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Sample response with PEM format:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>-----BEGIN RSA PUBLIC KEY-----
MIIBCgKCAQEAyURqBPP1k/kwMp8AiHeZya7zgO9ZulKrNvFYcQK2eIvkbl7VlhxY
t6bnJ0urrUrJbuM/bbRg3yiwXtAN/BsHWTm6JwWSjRx3PQMIm0Yb+HGj2YM6moJ9
YFACqtZB2zjkE98Q/TOhfAnYuoSIPsY3k9U1iJmi6gpaZ7E01QFGoRlAwB55yMET
l3UT7uodGLRPBz/JGhRuDCJ1dVEfzcojUxOt7FFbRIGDGQzMTvmskRID3N50z6Uw
JOFwmP6N17qIMYCbr3IQg0fU75HsL+lChpA8m+EnvK0hL4CcNnBVqupxzhsKq2SS
LigNBFC6J4gs3mV7L7qu1Q8u/Cg5tGVZiQIDAQAB
-----END RSA PUBLIC KEY-----
</code></pre></div>
<p>Retrieve the valid public keys for encrypting the payment information before sending to firmly&#39;s vault messenger</p>
<h3 id='http-request-14'>HTTP Request</h3>
<p><code>GET /api/v1/payment/key</code></p>
<h3 id='authentication-15'>Authentication</h3>
<p>This API requires no authentication.</p>
<h3 id='query-parameters-7'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>format</td>
<td>JWK</td>
<td>Determines the key format to be returned. Valid values are JWK for &quot;JSON Web Key&quot; or PEM for &quot;Privacy Enhanced Mail&quot;.</td>
</tr>
</tbody></table>
<h3 id='response-format-10'>Response format</h3><h4 id='jwk'>JWK</h4>
<p><code>Content-Type: application/json</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>kid</td>
<td>-</td>
<td>The ID/version of the key</td>
</tr>
<tr>
<td>kty</td>
<td>-</td>
<td>The type of the key. e.g. RSA</td>
</tr>
<tr>
<td>n</td>
<td>-</td>
<td>For RSA keys, this is the modulus component.</td>
</tr>
<tr>
<td>e</td>
<td>-</td>
<td>For RSA keys, this is the exponent component.</td>
</tr>
<tr>
<td>use</td>
<td>-</td>
<td>The purpose of the key. i.e. enc for encryption.</td>
</tr>
</tbody></table>
<h4 id='pem'>PEM</h4>
<p><code>Content-Type: plain/text</code></p>

<p>The PEM format string will be returned in the response body.</p>
<h2 id='tokenize-credit-card'>Tokenize Credit Card</h2>
<blockquote>
<p>Example for step 1. The <code>payload</code> must have the following format/attributes before the payload level encryption.</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"credit_card"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Smith"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4111 1111 1111 1111"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"month"</span><span class="p">:</span><span class="w"> </span><span class="s2">"08"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"year"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2028"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"verification_value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"billing_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"address1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123 Nice St"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"address2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"21st floor"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Newcastle"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state_or_province"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WA"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"United States"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"98056"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Example for step 2. Encoded as hex for visual representation.</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>06a42867eff13c7eb92ad06fa47db730d573308c089f6944ffcb75a3cb31809d
</code></pre></div>
<blockquote>
<p>Example for step 3. Encoded as hex for visual representation.</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>2e2144e8450a3eec8fdb10965d7b93ad
</code></pre></div>
<blockquote>
<p>Example for step 4. Encoded as hex for visual representation.</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>7e7760aa32d13b4d80804ff5494c1d47f6582ea509c6e734333aafb7014ee5d9ccdc5eb2ebdcbfd2e87552672e10af2ba002b17168b4da288d71e9054db30d1da76ab9a6b4ae08c7714f328d2b1e6569af7c90e3820b776c330b3620033584abf58b4c5c9dc814a5987d0bfe2fc5d1f70798f4fa8482812466cbf8070c7326b585c5a7ba57ca864d35a9a205e2ba39b37ef4e3cf320ec07f88925167a1aabc4fdf384837cb9ccffaa79b027df1ccae705c42b07c2493502fdfa5730162cc71fb6cd535609a208b68736468a830a82c583eb5f1deacf2c3722afd652004867114e7ef00370e9e35372180ae0f0c16737a9631ff30713526ed0a987f8e96cf758f611321832b2b0420cf349711f2a276287517de8aa97b2f02
</code></pre></div>
<blockquote>
<p>Example for step 5.</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>fndgqjLRO02AgE/1SUwdR/ZYLqUJxuc0MzqvtwFO5dnM3F6y69y/0uh1UmcuEK8roAKxcWi02iiNcekFTbMNHadquaa0rgjHcU8yjSseZWmvfJDjggt3bDMLNiADNYSr9YtMXJ3IFKWYfQv+L8XR9weY9PqEgoEkZsv4BwxzJrWFxae6V8qGTTWpogXiujmzfvTjzzIOwH+IklFnoaq8T984SDfLnM/6p5sCffHMrnBcQrB8JJNQL9+lcwFizHH7bNU1YJogi2hzZGioMKgsWD618d6s8sNyKv1lIASGcRTn7wA3Dp41NyGArg8MFnN6ljH/MHE1Ju0KmH+Ols91j2ETIYMrKwQgzzSXEfKidih1F96KqXsvAg==
</code></pre></div>
<blockquote>
<p>Example for step 6. Encoded as hex for representation. The output should be a binary array of 64 bytes.</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>06a42867eff13c7eb92ad06fa47db730d573308c089f6944ffcb75a3cb31809d2e2144e8450a3eec8fdb10965d7b93adb42315e16238b2107158ddd328d72497
</code></pre></div>
<blockquote>
<p>Example for step 7.</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>nbqyqyXRG/BeUkLCLsUU0FzUSoC/6TBJl53U0hOAbNY3xZAO2aRdWguKclaazM88W7FTrRl1ECwAiSwgUrNJ6hyojVaSYmE35XGoMHUg1s8z08riFvmW4yVvoYrfmi03OV8jgGrwFwuTPJS8x4HxWi7dO25elIEtgzZTKRZ+0eu6TjDSymRtBKzs8MswKSFiejw97HNqlyPl35NPhCSByxGO7akR9aWbwBGOx11IRCm42W1QQiBwWWlZDFOkPlxtC+u8xSjqQBS8HMKP7GaajHdKNIjKz7fFDqnVmM3Li5QSap/VpGt1TGiv3yVTUcSbfPhRYlCc1THETjFROfdjRA==
</code></pre></div>
<blockquote>
<p>Example for step 8. i.e. The request payload.</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"handle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VGhpcyB3aWxsIGNvbnRhaW4gZmlybWx5IGVuY3J5cHRlZCBpbmZvcm1hdGlvbiA9KQ=="</span><span class="p">,</span><span class="w">
    </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="s2">"o8WiAVufKq2zBnHJSGGfZNDdosVy5UrFWT/2YQ5O6cPSDE+HRtpkTkdVIMo/K+2Gckb1lnOIXA9nw9O4RifEbNI+f/JfC2olqtXuu3fG1dc2FYhVx78bwslQHuIIEGe7GdoDx02UeIpspEVgHm2RhsUDjP2ntDhyGOIV6UJKeKjrxmk2B5jDhtT7FqmbpRF027o/twbfAAXuHofoBn6HE+K64PALqvidylXHyPijFPnrfFgiw3OyNnC9ndxwpJj7jhAfuZiZZ8yj+1azoQs9AUHoS0foKxbXWmEWI6BrJImChmq4qwEIpAKrEDD4YuMzUvICQi2hDMnE2bP72Lkm320/qRX5yk6scTHFY5ZuqVHJcfIJVDIzq1SzrMwvDG4ALu7wuHeRzGnSqpdukXbzfW6vIr3lcFCTOClHdSvK66CeL4TgeHWqNQFlq8DbirbmvzQXUVndf9o2Kf1kCHphq9dN7ZX4EOiqMF+TGW2P6gKeodljCjgQsWKJcYQBODpdEYmtI/fk/kgYNdFUXcikFtV72KiX1g+MlHHK6UFBlnR0TNzVRJY2AmWSz1lzHkh4yDSvF+rXnXp645uI8hKIyYxfmiL8MDHrPuXzSDiY5Zbbp0Ser+QKBuhJwl97EnOx8+eZwkbguZy9S2ZsRLmgBQvPZCO091l0VSpcVBJLfSM="</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sEDb3VEQnfahgV5kbmNiPjY9B7e5qZrzcUBbiHoKOUSDIgf8QKxjKZbJkithDn7sPqNzBeDkhyvERj+izAeXo4wt8JF67meWbIcFSsCbioaO/dxCdAWdrJ2kIff+ua1r3ZS3gNXzLZiRywLzHWxa7zwxV5elIsMJCW3Ie/lJkvYLYwzTr+FasirK6mNUptm6OZYmZz1IFczso+XGlqw2uOnP7YgYQUCBw+tEutwNTwoefd6uQPxWbndame6Si7J0HW8rJBsmsHIx68zv19yoWu0OHJfakYcJMvKo+FW7c9bMZqrwX5grCU7/egsgzDR2c3FyZOZgepjH1KSDFK4AcE7HXnvhI/4UoNHABqyac95+kmmI0+ztWnqsvkQv68ZyNz7zCDWyHoYh/JSX+Oc7oMHOonJ+uTlwPhVo9HuHtfv6hfkTu5xn8nIYdMLOSK8baWUY8W5+ePDHK8YGP9lmQcF0e2IjtX4Lf1LXJsjNhMrNT26lzpxiIz3AEKekr004T5hiaWTYSKjmuLZz3pYz7WTgVjod4nOgPhbB6pciv0YLlA=="</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
  <span class="nt">--location</span> <span class="se">\</span>
  <span class="nt">--request</span> POST <span class="s1">'https://firmly.cc/api/v1/payment/tokenize'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'x-firmly-authorization: &lt;&gt;'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data-raw</span> <span class="s1">'{"handle": "VGhpcyB3aWxsIGNvbnRhaW4gZmlybWx5IGVuY3J5cHRlZCBpbmZvcm1hdGlvbiA9KQ==", "metadata":"o8WiAVufKq2zBnHJSGGfZNDdosVy5UrFWT/2YQ5O6cPSDE+HRtpkTkdVIMo/K+2Gckb1lnOIXA9nw9O4RifEbNI+f/JfC2olqtXuu3fG1dc2FYhVx78bwslQHuIIEGe7GdoDx02UeIpspEVgHm2RhsUDjP2ntDhyGOIV6UJKeKjrxmk2B5jDhtT7FqmbpRF027o/twbfAAXuHofoBn6HE+K64PALqvidylXHyPijFPnrfFgiw3OyNnC9ndxwpJj7jhAfuZiZZ8yj+1azoQs9AUHoS0foKxbXWmEWI6BrJImChmq4qwEIpAKrEDD4YuMzUvICQi2hDMnE2bP72Lkm320/qRX5yk6scTHFY5ZuqVHJcfIJVDIzq1SzrMwvDG4ALu7wuHeRzGnSqpdukXbzfW6vIr3lcFCTOClHdSvK66CeL4TgeHWqNQFlq8DbirbmvzQXUVndf9o2Kf1kCHphq9dN7ZX4EOiqMF+TGW2P6gKeodljCjgQsWKJcYQBODpdEYmtI/fk/kgYNdFUXcikFtV72KiX1g+MlHHK6UFBlnR0TNzVRJY2AmWSz1lzHkh4yDSvF+rXnXp645uI8hKIyYxfmiL8MDHrPuXzSDiY5Zbbp0Ser+QKBuhJwl97EnOx8+eZwkbguZy9S2ZsRLmgBQvPZCO091l0VSpcVBJLfSM=","data":"sEDb3VEQnfahgV5kbmNiPjY9B7e5qZrzcUBbiHoKOUSDIgf8QKxjKZbJkithDn7sPqNzBeDkhyvERj+izAeXo4wt8JF67meWbIcFSsCbioaO/dxCdAWdrJ2kIff+ua1r3ZS3gNXzLZiRywLzHWxa7zwxV5elIsMJCW3Ie/lJkvYLYwzTr+FasirK6mNUptm6OZYmZz1IFczso+XGlqw2uOnP7YgYQUCBw+tEutwNTwoefd6uQPxWbndame6Si7J0HW8rJBsmsHIx68zv19yoWu0OHJfakYcJMvKo+FW7c9bMZqrwX5grCU7/egsgzDR2c3FyZOZgepjH1KSDFK4AcE7HXnvhI/4UoNHABqyac95+kmmI0+ztWnqsvkQv68ZyNz7zCDWyHoYh/JSX+Oc7oMHOonJ+uTlwPhVo9HuHtfv6hfkTu5xn8nIYdMLOSK8baWUY8W5+ePDHK8YGP9lmQcF0e2IjtX4Lf1LXJsjNhMrNT26lzpxiIz3AEKekr004T5hiaWTYSKjmuLZz3pYz7WTgVjod4nOgPhbB6pciv0YLlA=="
  }'</span>
</code></pre></div>
<blockquote>
<p>Sample Response from above API:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VGhpcyB3aWxsIGNvbnRhaW4gIHRoZSB0b2tlbiBhbmQgc29tZSBmaXJtbHkgZW5jcnlwdGVkIGluZm9ybWF0aW9uID0p"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>The credit card security is taken very seriously by firmly. In order to secure the customer information, firmly uses two level of encryption for the data during transmission for tokenization. The data is always transmitted over TLS and secured additionally by AES 256 bits and RSA 4096 bits KEM (Learn more about <a href="https://en.wikipedia.org/wiki/Hybrid_cryptosystem">Hybrid Cryptosystem</a> and <a href="https://en.wikipedia.org/wiki/Key_encapsulation_mechanism">key encapsulation mechanism</a>).</p>

<p>In order to encrypt the customer information, follow the steps below. Examples can be found on the right side of the screen.</p>

<ol>
<li><p>Create a JSON containing the customer credit card number and billing information.</p></li>
<li><p>Generate a random 256 bits (32 bytes) key for AES encryption.</p></li>
<li><p>Generate a random 128 bits (16 bytes) initial vector (IV) for AES encryption.</p></li>
<li><p>Encrypt the string generated in item #1 using AES (<a href="https://en.wikipedia.org/wiki/Galois/Counter_Mode">GCM chaining</a>)</p></li>
<li><p>Encode the binary output of the previous step in Base64 representation (the result shall be sent in the attribute <code>data</code> of the request payload).</p></li>
<li><p>Concatenate the binary information for: AES key + IV + authentication tag (GCM)</p></li>
<li><p>Using public key encryption, encrypt the output of item #6 and encode it with base64 (the result will be sent in the field <code>metadata</code>). (The public key to be used shall be retrieved from the <a href="#get-public-key"><code>Get Public Key API</code></a>.)</p></li>
<li><p>Assemble the Tokenize API payload. (handle, metadata and data fields should be present in the payload).</p></li>
</ol>
<h3 id='http-request-15'>HTTP Request</h3>
<p><code>POST /api/v1/payment/tokenize</code></p>
<h3 id='authentication-16'>Authentication</h3>
<p>This API requires no authentication.</p>
<h3 id='payload-parameters-12'>Payload Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>handle</td>
<td>-</td>
<td>The handle retrieved as part of the cart once the shipping info is added.</td>
</tr>
<tr>
<td>metadata</td>
<td>-</td>
<td>The metadata required to decrypt the data field. It is composed by the random generated AES key + IV + Tag and encrypted with the firmly Vault&#39;s public key.</td>
</tr>
<tr>
<td>data</td>
<td>-</td>
<td>The customer payment information encrypted with AES 256 GCM chaining. The key, IV and Tag used in the encryption should be protected with the public key encryption.</td>
</tr>
</tbody></table>
<h3 id='response-format-11'>Response format</h3>
<p><code>Content-Type: application/json</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>token</td>
<td>-</td>
<td>Opaque one-time use token that should be sent to the firmly services to complete the order.</td>
</tr>
</tbody></table>

<!-- # Sequence Diagrams
## Dynamic Social Commerce Checkout

This solution is built for Social media companies to enable faster checkout in the website of participating merchants by dynamically replacing the checkout button with a customzied checkout where the customer doesn't have to give the billing and shipping information over and over again.


[![Dynamic Social Commerce Checkout](dynamic-social-commerce.svg)](images/dynamic-social-commerce-229999ed.svg)
 -->
<h1 id='data-model'>Data Model</h1><h2 id='currency'>Currency</h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">4.99</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency code as defined in ISO 4217.</td>
</tr>
<tr>
<td>value</td>
<td>float</td>
<td>Amount of this currency object.</td>
</tr>
</tbody></table>
<h2 id='shipping-method'>Shipping Method</h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shopify-Economy-0.00"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Economy"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>sku</td>
<td>string</td>
<td>Short text identifying the shipping method.</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>Description of the shipping method.</td>
</tr>
<tr>
<td>price</td>
<td>Currency</td>
<td>Price for this shipping method.</td>
</tr>
</tbody></table>
<h2 id='line-item'>Line Item</h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"42961836507384"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"base_sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7725397508344"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"line_price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"line_discount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cdn.shopify.com/s/files/1/0650/9202/6616/products/image1_small.jpg?v=1655838064"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"platform_line_item_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fdb139055ad337bfb346326a234cbe05"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Junior Smith Daredevil Ski Goggles"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"variant_description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Black"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"line_item_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"076a6428-6783-45a8-95c6-eacc8bb00fdd"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>sku</td>
<td>string</td>
<td>Variant Product SKU. Might be an abstraction of the real merchant&#39;s SKU.</td>
</tr>
<tr>
<td>base_sku</td>
<td>string</td>
<td>Base Product SKU. Might be an abstraction of the real merchant&#39;s SKU.</td>
</tr>
<tr>
<td>quantity</td>
<td>integer</td>
<td>Number of units this entry represents.</td>
</tr>
<tr>
<td>price</td>
<td>Currency</td>
<td>Unit price for this product.</td>
</tr>
<tr>
<td>line_price</td>
<td>Currency</td>
<td>Total line item price.</td>
</tr>
<tr>
<td>line_discount</td>
<td>Currency</td>
<td>Total line item discount. It is optional, when the discount is applied at the cart level.</td>
</tr>
<tr>
<td>image</td>
<td>object</td>
<td>Image URL for this product.</td>
</tr>
<tr>
<td>platform_line_item_id</td>
<td>string</td>
<td>Original merchant&#39;s identifer.</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>Description of the base product.</td>
</tr>
<tr>
<td>variant_description</td>
<td>string</td>
<td>Description of this specific variant.</td>
</tr>
<tr>
<td>line_item_id</td>
<td>string</td>
<td>Unique identifier of this line item in firmly services.</td>
</tr>
</tbody></table>
<h2 id='address'>Address</h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@firmly.ai"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(206) 555-1212"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123 Nice St"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address2"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Newcastle"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"98056"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state_or_province"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WA"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"United States"</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>first_name</td>
<td>string</td>
<td>Address&#39; first name.</td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td>Address&#39; last name.</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>Address&#39; email.</td>
</tr>
<tr>
<td>phone</td>
<td>string</td>
<td>Address&#39; phone number.</td>
</tr>
<tr>
<td>address1</td>
<td>string</td>
<td>Shipping address line 1. (number and street name)</td>
</tr>
<tr>
<td>address2</td>
<td>string</td>
<td>Shipping address line 2. (e.g. floor, apt, etc.)</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td>Shipping address&#39; city</td>
</tr>
<tr>
<td>postal_code</td>
<td>string</td>
<td>Shipping address&#39; postal code.</td>
</tr>
<tr>
<td>state_or_province</td>
<td>string</td>
<td>Shipping address&#39; state.</td>
</tr>
<tr>
<td>country</td>
<td>string</td>
<td>Shipping address country.</td>
</tr>
</tbody></table>
<h2 id='cart-model'>Cart Model</h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"platform_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shopify"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"shop_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"59"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cart_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30c28ec6-7321-4a61-92ed-8067c59b41e6"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"line_items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"42961836507384"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"base_sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7725397508344"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"line_price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"line_discount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cdn.shopify.com/s/files/1/0650/9202/6616/products/image1_small.jpg?v=1655838064"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"platform_line_item_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fdb139055ad337bfb346326a234cbe05"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Junior Smith Daredevil Ski Goggles"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"variant_description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Black"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"line_item_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"076a6428-6783-45a8-95c6-eacc8bb00fdd"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"shipping_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(206) 555-1212"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"address1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123 Nice St"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Newcastle"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state_or_province"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WA"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"United States"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"98056"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@firmly.ai"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"shipping_method"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shopify-Economy-0.00"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Economy"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"applicable_line_items"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"sub_total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"shipping_total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"tax"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"shipping_method_options"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shopify-Economy-0.00"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Economy"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shopify-Standard-4.90"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">4.9</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"app_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fdc6e81b-3792-4920-b19b-986c334f3e19"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"payment_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://deposit.us.shopifycs.com/sessions"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cart_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>cart_status</td>
<td>string</td>
<td>Status of this cart.</td>
</tr>
<tr>
<td>platform_id</td>
<td>string</td>
<td>firmly platform id for the current cart.</td>
</tr>
<tr>
<td>shop_id</td>
<td>string</td>
<td>Merchant identified on firmly services.</td>
</tr>
<tr>
<td>cart_id</td>
<td>uuid</td>
<td>Unique identifier for this cart on firmly services.</td>
</tr>
<tr>
<td>line_items</td>
<td>LineItem[]</td>
<td>List of line items of this cart.</td>
</tr>
<tr>
<td>payment_url</td>
<td>string</td>
<td>URL of this merchant&#39;s Vault for payment instrument tokenization.</td>
</tr>
<tr>
<td>shipping_info</td>
<td>Address</td>
<td>Shipping address</td>
</tr>
<tr>
<td>shipping_method</td>
<td>string</td>
<td>Identifier for the current selected shipping method.</td>
</tr>
<tr>
<td>shipping_method_options</td>
<td>ShippingMethod[]</td>
<td>List of available shipping methods for this cart.</td>
</tr>
<tr>
<td>sub_total</td>
<td>Currency</td>
<td>Subtotal value for this cart.</td>
</tr>
<tr>
<td>total</td>
<td>Currency</td>
<td>Total value of this cart. (Subtotal + tax)</td>
</tr>
<tr>
<td>shipping_total</td>
<td>Currency</td>
<td>Total value for all shipment cost of this cart.</td>
</tr>
<tr>
<td>tax</td>
<td>Currency</td>
<td>Estimated tax to be collected for this cart.</td>
</tr>
<tr>
<td>cart_discount</td>
<td>Currency</td>
<td>Total discount provided for this cart.</td>
</tr>
<tr>
<td>coupons</td>
<td>-</td>
<td>list of applicable coupons applied in the cart. if the list is empty, it means the coupons are not valid.</td>
</tr>
</tbody></table>
<h2 id='order-model'>Order Model</h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"platform_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shopify"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"shop_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"youngrebelz.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cart_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6f0c0063-43bf-4f44-880a-bcbd6cbb0807"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"line_items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"29227235868724"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"base_sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3796148518964"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"variant_option_list"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">6.5</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"line_price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">6.5</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"line_discount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"requires_shipping"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://cdn.shopify.com/s/files/1/0065/5812/2036/products/Tank-Top-Women-White-Front_small.jpg?v=1565574386"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"platform_line_item_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cc8a4896b4da26dbe37d89b85b44efeb"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tank Top Women White"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"variant_description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"M / White"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"line_item_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7d00fa5c-f723-445b-a465-d038ae0adbe0"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"shipping_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(206) 555-1212"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"address1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123 Nice St."</span><span class="p">,</span><span class="w">
        </span><span class="nl">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Newcastle"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state_or_province"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WA"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"United States"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"98056"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@firmly.ai"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"shipping_method"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shopify-Economy-2.00"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Economy"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"applicable_line_items"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">9.35</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"sub_total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">6.5</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"shipping_total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"tax"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.85</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"shipping_method_options"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shopify-Economy-2.00"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Economy"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"platform_order_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Order #1784"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"app_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9ce7a122-7c0d-4a13-893d-5d376f197fe6"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="nl">"payment_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://deposit.us.shopifycs.com/sessions"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"card_holder_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Krishna"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"bin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"485246"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"last_four"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0465"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"month"</span><span class="p">:</span><span class="w"> </span><span class="s2">"05"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"year"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2028"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"card_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Visa"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"cart_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"submitted"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"coupons"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>The order model inherits all properties from the <a href="https://docs.firmly.ai/#cart-model"><code>Cart</code></a>.</p>

<p>It includes certain additional information on top of the cart object as depected below.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>platform_order_number</td>
<td>string</td>
<td>The order id in the merchant&#39;s website.</td>
</tr>
</tbody></table>
<h1 id='errors'>Errors</h1>
<p>firmly errors will following a general normalized convention no matter what is the module returning the error.
The errors will always change the HTTP response code and have the following format in the HTTP body:</p>

<blockquote>
<p>Example of error response.</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">401</span><span class="p">,</span><span class="w">
    </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"InvalidDeviceIssuedJWT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Device issued JWT is invalid.  Either it has expired or the signature is incorrect."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>-</td>
<td>The HTTP error code status.</td>
</tr>
<tr>
<td>error</td>
<td>-</td>
<td>Normalized error identifier. More details can be found in the table below.</td>
</tr>
<tr>
<td>description</td>
<td>-</td>
<td>String with error details. It can vary depending on how the error was generated in the system.</td>
</tr>
</tbody></table>

<aside class="notice">
The <code>description</code> parameter may vary according to the merchant/platform to provide detailed information to the user.
In order to handle the error properly, please, rely on the <code>code</code> and <code>error</code> parameters.
</aside>

<p>The firmly services API may return the following error codes:</p>

<table><thead>
<tr>
<th>Normalized Identifier</th>
<th>Error Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>InvalidShippingMethod</td>
<td>400</td>
<td>Invalid shipping method</td>
</tr>
<tr>
<td>InvalidToken</td>
<td>400</td>
<td>Jwt token is invalid</td>
</tr>
<tr>
<td>InvalidShippingInfo</td>
<td>400</td>
<td>The shipping info provided is not valid.</td>
</tr>
<tr>
<td>Unauthorized</td>
<td>401</td>
<td>Caller is not authroized to make this call</td>
</tr>
<tr>
<td>InvalidDeviceIssuedJWT</td>
<td>401</td>
<td>Device issued JWT is invalid.  Either it has expired or the signature is incorrect.</td>
</tr>
<tr>
<td>ShopNotFound</td>
<td>404</td>
<td>The shop is not setup in our system.</td>
</tr>
<tr>
<td>ProductNotFound</td>
<td>404</td>
<td>Product not found.</td>
</tr>
<tr>
<td>ItemNotFound</td>
<td>404</td>
<td>Item not found.</td>
</tr>
<tr>
<td>UnregisteredDevice</td>
<td>404</td>
<td>Device does not have an active registration in the system.</td>
</tr>
<tr>
<td>CartNotFound</td>
<td>404</td>
<td>Cart was not found.</td>
</tr>
<tr>
<td>InvalidPromoCode</td>
<td>409</td>
<td>Enter a valid discount code</td>
</tr>
<tr>
<td>PromoNotAvailable</td>
<td>409</td>
<td>This merchant does not allow promotions for this cart.</td>
</tr>
<tr>
<td>InventoryError</td>
<td>409</td>
<td>Inventory has changed. Quantity should not exceed new maximum quantity.</td>
</tr>
<tr>
<td>MultipleDiscountCodesNotSupported</td>
<td>409</td>
<td>This store does not support multiple discount codes.</td>
</tr>
<tr>
<td>StartCheckoutNeedsToBeCalled</td>
<td>412</td>
<td>startCheckout method needs to be called first.</td>
</tr>
<tr>
<td>CheckoutError</td>
<td>412</td>
<td>Payment info or billing address invalid.</td>
</tr>
<tr>
<td>MissingShippingInfo</td>
<td>412</td>
<td>Shipping info needs to be set</td>
</tr>
<tr>
<td>MissingShippingMethod</td>
<td>412</td>
<td>Shipping method needs to be set</td>
</tr>
<tr>
<td>MissingEmailAddressOnCheckout</td>
<td>412</td>
<td>Missing email address during checkout phase.</td>
</tr>
<tr>
<td>UnprocessableEntity</td>
<td>422</td>
<td>The given payload has unprocessable, invalid or non-existent data. Please check the data and try again.</td>
</tr>
<tr>
<td>Unexpected</td>
<td>500</td>
<td>Unexpected server error</td>
</tr>
<tr>
<td>DatabaseError</td>
<td>500</td>
<td>A data access error has ocurred.  If the error persists, please contact the admin</td>
</tr>
<tr>
<td>NotImplemented</td>
<td>501</td>
<td>This action is not implemented. Please contact the admin.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
