<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1061px" preserveAspectRatio="none" style="width:1018px;height:1061px;background:#00000000;" version="1.1" viewBox="0 0 1018 1061" width="1018px" zoomAndPan="magnify"><defs><filter height="300%" id="f1tbtlot5o575p" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1tbtlot5o575p)" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="143.5" y="236.9727"/><rect fill="#FFFFFF" filter="url(#f1tbtlot5o575p)" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="143.5" y="309.2832"/><rect fill="#FFFFFF" filter="url(#f1tbtlot5o575p)" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="143.5" y="523.1465"/><rect fill="#FFFFFF" filter="url(#f1tbtlot5o575p)" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="143.5" y="753.6309"/><rect fill="#FFFFFF" filter="url(#f1tbtlot5o575p)" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="143.5" y="967.4941"/><rect fill="#FFFFFF" filter="url(#f1tbtlot5o575p)" height="112.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="576.5" y="373.5938"/><rect fill="#FFFFFF" filter="url(#f1tbtlot5o575p)" height="112.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="576.5" y="817.9414"/><rect fill="#FFFFFF" filter="url(#f1tbtlot5o575p)" height="41.4658" style="stroke:#181818;stroke-width:1.0;" width="10" x="971.5" y="415.0596"/><rect fill="#FFFFFF" filter="url(#f1tbtlot5o575p)" height="41.4658" style="stroke:#181818;stroke-width:1.0;" width="10" x="971.5" y="859.4072"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="148" x2="148" y1="39.4883" y2="1020.4941"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="581.5" x2="581.5" y1="39.4883" y2="1020.4941"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="976.5" x2="976.5" y1="39.4883" y2="1020.4941"/><rect fill="#E2E2F0" filter="url(#f1tbtlot5o575p)" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="208" x="43" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="194" x="50" y="25.5352">Partner Application/Browser</text><rect fill="#E2E2F0" filter="url(#f1tbtlot5o575p)" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="208" x="43" y="1019.4941"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="194" x="50" y="1040.0293">Partner Application/Browser</text><rect fill="#E2E2F0" filter="url(#f1tbtlot5o575p)" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="111" x="524.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="531.5" y="25.5352">Partner Server</text><rect fill="#E2E2F0" filter="url(#f1tbtlot5o575p)" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="111" x="524.5" y="1019.4941"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="531.5" y="1040.0293">Partner Server</text><rect fill="#E2E2F0" filter="url(#f1tbtlot5o575p)" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="57" x="946.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="953.5" y="25.5352">firmly.</text><rect fill="#E2E2F0" filter="url(#f1tbtlot5o575p)" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="57" x="946.5" y="1019.4941"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="953.5" y="1040.0293">firmly.</text><rect fill="#FFFFFF" filter="url(#f1tbtlot5o575p)" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="143.5" y="236.9727"/><rect fill="#FFFFFF" filter="url(#f1tbtlot5o575p)" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="143.5" y="309.2832"/><rect fill="#FFFFFF" filter="url(#f1tbtlot5o575p)" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="143.5" y="523.1465"/><rect fill="#FFFFFF" filter="url(#f1tbtlot5o575p)" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="143.5" y="753.6309"/><rect fill="#FFFFFF" filter="url(#f1tbtlot5o575p)" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="143.5" y="967.4941"/><rect fill="#FFFFFF" filter="url(#f1tbtlot5o575p)" height="112.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="576.5" y="373.5938"/><rect fill="#FFFFFF" filter="url(#f1tbtlot5o575p)" height="112.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="576.5" y="817.9414"/><rect fill="#FFFFFF" filter="url(#f1tbtlot5o575p)" height="41.4658" style="stroke:#181818;stroke-width:1.0;" width="10" x="971.5" y="415.0596"/><rect fill="#FFFFFF" filter="url(#f1tbtlot5o575p)" height="41.4658" style="stroke:#181818;stroke-width:1.0;" width="10" x="971.5" y="859.4072"/><rect fill="#EEEEEE" filter="url(#f1tbtlot5o575p)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1011.5" x="0" y="70.1436"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1011.5" y1="70.1436" y2="70.1436"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1011.5" y1="73.1436" y2="73.1436"/><rect fill="#EEEEEE" filter="url(#f1tbtlot5o575p)" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="149" x="431.25" y="59.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="131" x="437.25" y="76.0566">Device Registration</text><path d="M5,97.7988 L5,198.7988 L290,198.7988 L290,107.7988 L280,97.7988 L5,97.7988 " fill="#FEFFDD" filter="url(#f1tbtlot5o575p)" style="stroke:#181818;stroke-width:0.5;"/><path d="M280,97.7988 L280,107.7988 L290,107.7988 L280,97.7988 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="237" x="11" y="115.3672">In order for firmly to manage the user</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="244" x="11" y="130.6777">session and guarantee the authenticity</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="264" x="11" y="145.9883">of the customer flow related transactions,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198" x="11" y="161.2988">every device must register their</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="209" x="11" y="176.6094">asymmetric key (Public part) with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="11" y="191.9199">firmly identity service.</text><line style="stroke:#181818;stroke-width:1.0;" x1="153.5" x2="195.5" y1="228.9727" y2="228.9727"/><line style="stroke:#181818;stroke-width:1.0;" x1="195.5" x2="195.5" y1="228.9727" y2="241.9727"/><line style="stroke:#181818;stroke-width:1.0;" x1="154.5" x2="195.5" y1="241.9727" y2="241.9727"/><polygon fill="#181818" points="164.5,237.9727,154.5,241.9727,164.5,245.9727,160.5,241.9727" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="160.5" y="224.2305">[001]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="196.5" y="224.2305">Generate RSA key pair</text><line style="stroke:#181818;stroke-width:1.0;" x1="153.5" x2="195.5" y1="301.2832" y2="301.2832"/><line style="stroke:#181818;stroke-width:1.0;" x1="195.5" x2="195.5" y1="301.2832" y2="314.2832"/><line style="stroke:#181818;stroke-width:1.0;" x1="154.5" x2="195.5" y1="314.2832" y2="314.2832"/><polygon fill="#181818" points="164.5,310.2832,154.5,314.2832,164.5,318.2832,160.5,314.2832" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="160.5" y="296.541">[002]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="383" x="196.5" y="296.541">Securely save the private and public keys in the local storage</text><polygon fill="#181818" points="564.5,369.5938,574.5,373.5938,564.5,377.5938,568.5,373.5938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="148.5" x2="570.5" y1="373.5938" y2="373.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="155.5" y="368.8516">[003]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="191.5" y="368.8516">Register Device API</text><polygon fill="#181818" points="959.5,411.0596,969.5,415.0596,959.5,419.0596,963.5,415.0596" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="586.5" x2="965.5" y1="415.0596" y2="415.0596"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="593.5" y="410.3174">[004]</text><a href="https://docs.firmly.ai/#devices-session" target="_top" title="https://docs.firmly.ai/#devices-session" xlink:actuate="onRequest" xlink:href="https://docs.firmly.ai/#devices-session" xlink:show="new" xlink:title="https://docs.firmly.ai/#devices-session" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="301" x="629.5" y="410.3174">Register Device API (POST /v1/devices-session)</text></a><path d="M230,386.5938 L230,426.5938 L568,426.5938 L568,396.5938 L558,386.5938 L230,386.5938 " fill="#FEFFDD" filter="url(#f1tbtlot5o575p)" style="stroke:#181818;stroke-width:0.5;"/><path d="M558,386.5938 L558,396.5938 L568,396.5938 L558,386.5938 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="317" x="236" y="404.1621">The partner server must send the provided API key</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="236" y="419.4727">in the</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="155" x="276" y="419.4727">x-firmly-authorization</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="435" y="419.4727">header</text><polygon fill="#181818" points="597.5,452.5254,587.5,456.5254,597.5,460.5254,593.5,456.5254" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="591.5" x2="975.5" y1="456.5254" y2="456.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="603.5" y="451.7832">[005]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210" x="639.5" y="451.7832">Device id and client access token</text><polygon fill="#181818" points="159.5,481.8359,149.5,485.8359,159.5,489.8359,155.5,485.8359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="153.5" x2="580.5" y1="485.8359" y2="485.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="165.5" y="481.0938">[006]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210" x="201.5" y="481.0938">Device id and client access token</text><line style="stroke:#181818;stroke-width:1.0;" x1="153.5" x2="195.5" y1="515.1465" y2="515.1465"/><line style="stroke:#181818;stroke-width:1.0;" x1="195.5" x2="195.5" y1="515.1465" y2="528.1465"/><line style="stroke:#181818;stroke-width:1.0;" x1="154.5" x2="195.5" y1="528.1465" y2="528.1465"/><polygon fill="#181818" points="164.5,524.1465,154.5,528.1465,164.5,532.1465,160.5,528.1465" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="160.5" y="510.4043">[007]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="279" x="196.5" y="510.4043">Persists the device id in local secure storage</text><rect fill="#EEEEEE" filter="url(#f1tbtlot5o575p)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1011.5" x="0" y="586.8018"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1011.5" y1="586.8018" y2="586.8018"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1011.5" y1="589.8018" y2="589.8018"/><rect fill="#EEEEEE" filter="url(#f1tbtlot5o575p)" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="167" x="422.25" y="576.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="149" x="428.25" y="592.7148">Device Authentication</text><path d="M5,614.457 L5,715.457 L290,715.457 L290,624.457 L280,614.457 L5,614.457 " fill="#FEFFDD" filter="url(#f1tbtlot5o575p)" style="stroke:#181818;stroke-width:0.5;"/><path d="M280,614.457 L280,624.457 L290,624.457 L280,614.457 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="237" x="11" y="632.0254">In order for firmly to manage the user</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="244" x="11" y="647.3359">session and guarantee the authenticity</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="264" x="11" y="662.6465">of the customer flow related transactions,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198" x="11" y="677.957">every device must register their</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="209" x="11" y="693.2676">asymmetric key (Public part) with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="11" y="708.5781">firmly identity service.</text><line style="stroke:#181818;stroke-width:1.0;" x1="153.5" x2="195.5" y1="745.6309" y2="745.6309"/><line style="stroke:#181818;stroke-width:1.0;" x1="195.5" x2="195.5" y1="745.6309" y2="758.6309"/><line style="stroke:#181818;stroke-width:1.0;" x1="154.5" x2="195.5" y1="758.6309" y2="758.6309"/><polygon fill="#181818" points="164.5,754.6309,154.5,758.6309,164.5,762.6309,160.5,758.6309" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="160.5" y="740.8887">[008]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="361" x="196.5" y="740.8887">Retrieve existing key pair and deviceId from local storage</text><polygon fill="#181818" points="564.5,813.9414,574.5,817.9414,564.5,821.9414,568.5,817.9414" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="148.5" x2="570.5" y1="817.9414" y2="817.9414"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="155.5" y="813.1992">[009]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="191.5" y="813.1992">Authenticate Device</text><polygon fill="#181818" points="959.5,855.4072,969.5,859.4072,959.5,863.4072,963.5,859.4072" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="586.5" x2="965.5" y1="859.4072" y2="859.4072"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="593.5" y="854.665">[010]</text><a href="https://docs.firmly.ai/#devices-session" target="_top" title="https://docs.firmly.ai/#devices-session" xlink:actuate="onRequest" xlink:href="https://docs.firmly.ai/#devices-session" xlink:show="new" xlink:title="https://docs.firmly.ai/#devices-session" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacing" text-decoration="underline" textLength="330" x="629.5" y="854.665">Authenticate Device API (POST /v1/devices-session)</text></a><path d="M230,830.9414 L230,870.9414 L568,870.9414 L568,840.9414 L558,830.9414 L230,830.9414 " fill="#FEFFDD" filter="url(#f1tbtlot5o575p)" style="stroke:#181818;stroke-width:0.5;"/><path d="M558,830.9414 L558,840.9414 L568,840.9414 L558,830.9414 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="317" x="236" y="848.5098">The partner server must send the provided API key</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="236" y="863.8203">in the</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="155" x="276" y="863.8203">x-firmly-authorization</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="435" y="863.8203">header</text><polygon fill="#181818" points="597.5,896.873,587.5,900.873,597.5,904.873,593.5,900.873" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="591.5" x2="975.5" y1="900.873" y2="900.873"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="603.5" y="896.1309">[011]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="639.5" y="896.1309">Client access token</text><polygon fill="#181818" points="159.5,926.1836,149.5,930.1836,159.5,934.1836,155.5,930.1836" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="153.5" x2="580.5" y1="930.1836" y2="930.1836"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="165.5" y="925.4414">[012]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="201.5" y="925.4414">Client access token</text><line style="stroke:#181818;stroke-width:1.0;" x1="153.5" x2="195.5" y1="959.4941" y2="959.4941"/><line style="stroke:#181818;stroke-width:1.0;" x1="195.5" x2="195.5" y1="959.4941" y2="972.4941"/><line style="stroke:#181818;stroke-width:1.0;" x1="154.5" x2="195.5" y1="972.4941" y2="972.4941"/><polygon fill="#181818" points="164.5,968.4941,154.5,972.4941,164.5,976.4941,160.5,972.4941" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="160.5" y="954.752">[013]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="331" x="196.5" y="954.752">Persists access token for the duration of the session</text></g></svg>