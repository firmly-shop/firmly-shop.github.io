<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="702px" preserveAspectRatio="none" style="width:1006px;height:702px;background:#00000000;" version="1.1" viewBox="0 0 1006 702" width="1006px" zoomAndPan="magnify"><defs><filter height="300%" id="f11iaqdttcmgek" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f11iaqdttcmgek)" height="87.3975" style="stroke:#181818;stroke-width:1.0;" width="10" x="461" y="128.8857"/><rect fill="#FFFFFF" filter="url(#f11iaqdttcmgek)" height="101.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="619.5" y="269.9043"/><rect fill="#FFFFFF" filter="url(#f11iaqdttcmgek)" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="624.5" y="307.2148"/><rect fill="#FFFFFF" filter="url(#f11iaqdttcmgek)" height="167.3633" style="stroke:#181818;stroke-width:1.0;" width="10" x="619.5" y="402.8359"/><rect fill="#FFFFFF" filter="url(#f11iaqdttcmgek)" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="624.5" y="440.1465"/><rect fill="none" filter="url(#f11iaqdttcmgek)" height="412.6582" style="stroke:#000000;stroke-width:1.5;" width="796.5" x="198" y="231.2832"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="101" x2="101" y1="39.4883" y2="660.9414"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="265" x2="265" y1="39.4883" y2="660.9414"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="466" x2="466" y1="39.4883" y2="660.9414"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="624" x2="624" y1="39.4883" y2="660.9414"/><rect fill="#E2E2F0" filter="url(#f11iaqdttcmgek)" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="190" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="176" x="12" y="25.5352">Partner Client Application</text><rect fill="#E2E2F0" filter="url(#f11iaqdttcmgek)" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="190" x="5" y="659.9414"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="176" x="12" y="680.4766">Partner Client Application</text><rect fill="#E2E2F0" filter="url(#f11iaqdttcmgek)" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="111" x="208" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="215" y="25.5352">Partner Server</text><rect fill="#E2E2F0" filter="url(#f11iaqdttcmgek)" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="111" x="208" y="659.9414"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="215" y="680.4766">Partner Server</text><rect fill="#E2E2F0" filter="url(#f11iaqdttcmgek)" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="179" x="375" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="165" x="382" y="25.5352">firmly (Identity Provider)</text><rect fill="#E2E2F0" filter="url(#f11iaqdttcmgek)" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="179" x="375" y="659.9414"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="165" x="382" y="680.4766">firmly (Identity Provider)</text><rect fill="#E2E2F0" filter="url(#f11iaqdttcmgek)" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112" x="567" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="574" y="25.5352">firmly Services</text><rect fill="#E2E2F0" filter="url(#f11iaqdttcmgek)" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112" x="567" y="659.9414"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="574" y="680.4766">firmly Services</text><rect fill="#FFFFFF" filter="url(#f11iaqdttcmgek)" height="87.3975" style="stroke:#181818;stroke-width:1.0;" width="10" x="461" y="128.8857"/><rect fill="#FFFFFF" filter="url(#f11iaqdttcmgek)" height="101.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="619.5" y="269.9043"/><rect fill="#FFFFFF" filter="url(#f11iaqdttcmgek)" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="624.5" y="307.2148"/><rect fill="#FFFFFF" filter="url(#f11iaqdttcmgek)" height="167.3633" style="stroke:#181818;stroke-width:1.0;" width="10" x="619.5" y="402.8359"/><rect fill="#FFFFFF" filter="url(#f11iaqdttcmgek)" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="624.5" y="440.1465"/><polygon fill="#181818" points="449,124.8857,459,128.8857,449,132.8857,453,128.8857" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="265" x2="455" y1="128.8857" y2="128.8857"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="272" y="124.1436">[001]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="308" y="124.1436">Access Token Request</text><path d="M476,54.4883 L476,186.4883 L835,186.4883 L835,64.4883 L825,54.4883 L476,54.4883 " fill="#FEFFDD" filter="url(#f11iaqdttcmgek)" style="stroke:#181818;stroke-width:0.5;"/><path d="M825,54.4883 L825,64.4883 L835,64.4883 L825,54.4883 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="255" x="482" y="72.0566">firmly services require the partner server</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="275" x="482" y="87.3672">to exchange an authentication token before</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="282" x="482" y="102.6777">proceding on any of the non public API calls.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="482" y="117.9883"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="282" x="482" y="133.2988">It also gives the oportunity for the partner to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="338" x="482" y="148.6094">internally manage the authorization of a certain client</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="259" x="482" y="163.9199">and allows firmly to have a better control</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163" x="482" y="179.2305">of the partner registration</text><polygon fill="#181818" points="276,212.2832,266,216.2832,276,220.2832,272,216.2832" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="270" x2="465" y1="216.2832" y2="216.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="282" y="211.541">[002]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="318" y="211.541">JWT access token</text><path d="M198,231.2832 L260,231.2832 L260,238.5938 L250,248.5938 L198,248.5938 L198,231.2832 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="412.6582" style="stroke:#000000;stroke-width:1.5;" width="796.5" x="198" y="231.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="213" y="244.8516">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="179" x="275" y="243.918">[Successful authentication flow]</text><polygon fill="#181818" points="607.5,265.9043,617.5,269.9043,607.5,273.9043,611.5,269.9043" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="265" x2="613.5" y1="269.9043" y2="269.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="272" y="265.1621">[003]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="308" y="265.1621">Perform server action to firmly</text><line style="stroke:#181818;stroke-width:1.0;" x1="634.5" x2="676.5" y1="299.2148" y2="299.2148"/><line style="stroke:#181818;stroke-width:1.0;" x1="676.5" x2="676.5" y1="299.2148" y2="312.2148"/><line style="stroke:#181818;stroke-width:1.0;" x1="635.5" x2="676.5" y1="312.2148" y2="312.2148"/><polygon fill="#181818" points="645.5,308.2148,635.5,312.2148,645.5,316.2148,641.5,312.2148" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="641.5" y="294.4727">[004]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="677.5" y="294.4727">Performs authN and authZ validation</text><polygon fill="#181818" points="276,367.5254,266,371.5254,276,375.5254,272,371.5254" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="270" x2="623.5" y1="371.5254" y2="371.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="282" y="366.7832">[005]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="318" y="366.7832">Success</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="198" x2="994.5" y1="380.5254" y2="380.5254"/><polygon fill="#181818" points="607.5,398.8359,617.5,402.8359,607.5,406.8359,611.5,402.8359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="265" x2="613.5" y1="402.8359" y2="402.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="272" y="398.0938">[006]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="308" y="398.0938">Perform server action to firmly</text><line style="stroke:#181818;stroke-width:1.0;" x1="634.5" x2="676.5" y1="432.1465" y2="432.1465"/><line style="stroke:#181818;stroke-width:1.0;" x1="676.5" x2="676.5" y1="432.1465" y2="445.1465"/><line style="stroke:#181818;stroke-width:1.0;" x1="635.5" x2="676.5" y1="445.1465" y2="445.1465"/><polygon fill="#181818" points="645.5,441.1465,635.5,445.1465,645.5,449.1465,641.5,445.1465" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="641.5" y="427.4043">[007]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="677.5" y="427.4043">Performs authN and authZ validation</text><polygon fill="#181818" points="276,566.1992,266,570.1992,276,574.1992,272,570.1992" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="270" x2="623.5" y1="570.1992" y2="570.1992"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="282" y="565.457">[008]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="318" y="565.457">401 Unauthorized</text><path d="M634,488.1465 L634,635.1465 L976,635.1465 L976,498.1465 L966,488.1465 L634,488.1465 " fill="#FEFFDD" filter="url(#f11iaqdttcmgek)" style="stroke:#181818;stroke-width:0.5;"/><path d="M966,488.1465 L966,498.1465 L976,498.1465 L966,488.1465 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="303" x="640" y="505.7148">In the event of the receiving a 401 Unauthorized</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="290" x="640" y="521.0254">error. The partner server must try to exchange</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="284" x="640" y="536.3359">one additional token and retry the call before</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="640" y="551.6465">failing.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="640" y="566.957"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="321" x="640" y="582.2676">Additionally, firmly recommends that a new access</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="286" x="640" y="597.5781">token is exchanged within a certain safe time</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="240" x="640" y="612.8887">tolerance to the actual expiration date</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="640" y="628.1992">(e.g. 5 minutes)</text></g></svg>